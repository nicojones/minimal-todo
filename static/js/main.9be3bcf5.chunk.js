(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{116:function(e,t,n){},117:function(e,t){window.isSmallScreen=!1,window.onresize=function(){window.isSmallScreen=window.innerWidth<800},window.onresize()},141:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(35),o=n.n(s),i=(n(116),n(117),n(7)),l=n(19),u=n(13),d=n(5),j=n.n(d),p=n(9),b=n(10),h=n(21),m=n.n(h),f={production:!0,firebase:{apiKey:"AIzaSyDxmJzv3ccl0_ouKB9oVSzWIsn6uysYMLQ",databaseURL:"https://todo-list-react-33431.firebaseio.com",projectId:"todo-list-react-33431",authDomain:"todo-list-react-33431.firebaseapp.com",storageBucket:"todo-list-react-33431.appspot.com",messagingSenderId:"153291173882",appId:"1:153291173882:web:4eb5673b9a70ce5828fe43",measurementId:"G-BCMCPMQHDB"},url:"https://us-central1-todo-list-react-33431.cloudfunctions.net/api"},O=n(11),x=n(36);n(137),n(258),n(139);x.a.initializeApp(f.firebase);var g=x.a.analytics,v=x.a.auth,k=x.a.firestore;function w(e){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder("utf-8").encode(t),e.next=3,crypto.subtle.digest("SHA-1",n);case 3:return a=e.sent,e.abrupt("return",Array.from(new Uint8Array(a)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.production?g():(k().useEmulator("localhost",8080),v().useEmulator("http://localhost:9099/"));var C,S={gotoApp:"Open app",loading:"Loading app...",noListName:"New Project "+(new Date).toISOString().slice(0,10),task:{name:"Name of the task",delete:"Delete task and its subtasks? Can't be undone",addTaskPh:function(){var e=["e.g. Buy carrots","e.g. Clean apartment in the morning","e.g. Do some exercise","Add a new task ...","Create a task ...","e.g. Call family","e.g. Schedule interview"];return e[Math.floor(Math.random()*e.length)]},addSubtaskPh:"Add subtasks to this task",save:"Save",discard:"Cancel changes",notes:"Notes",notesPh:"An optional description always helps"},drawer:{inbox:{_:"Inbox"},invalidDrawer:"Invalid URL (not an actual project)"},sharedProject:"This project is shared",subtaskStatus:"( Pending / Completed )",allTasksCompleted:function(){var e=["\ud83d\ude01 All tasks completed!","Now that's what I call a clean list \ud83e\udd73","Wow, such empty \ud83d\udc4f","Finitto? Go for a cappuccino \u2615\ufe0f","All tasks done, time for a break \ud83c\udfd6","So productive. I'm impressed \ud83d\ude0e","Make a Todolist: Done \u2705","I am Finnish \ud83c\uddeb\ud83c\uddee with all tasks."];return e[Math.floor(Math.random()*e.length)]},completed:"Completed",completedNo:"No completed tasks",showCompleted:"Show completed tasks",hideCompleted:"Hide completed tasks",project:{s:"Projects",noSelected:"Select a project or create a new one.",share:"Share Project",delete:{_:"Delete Project",long:"Delete this project and all the tasks? (cannot be undone)"},add:{ph:"Enter a name for a new project"}},genericError:"An error occurred. Please see console for details",loggedInAs:function(e){return"Logged in as ".concat(e,".")},login:{login:"Log in",signup:"Sign up",logout:"Log out",noAccount:"Don't have an account?",yesAccount:"Already a user?",error:"Invalid credentials",success:"Welcome Back!",signupSuccess:"Account created! Logging you in...",invalidPass:"Invalid login credentials",invalidUser:"No user exists for this email"}},y="#aaa",T={position:"bottom-center"},P=3,E={setToken:function(e){localStorage.setItem("AuthToken",e)},authState:function(e){v().onIdTokenChanged((function(t){clearTimeout(C),C=setTimeout((function(){t&&t.getIdToken(!0).then((function(e){E.setToken(e)})),e(t)}),300)}))},signup:function(e){return w(e.password).then((function(t){return m()({url:"".concat(f.url,"/signup"),method:"POST",data:Object(p.a)(Object(p.a)({},e),{},{password:t})})})).then((function(t){return E.login({email:e.email,password:e.password})}))},login:function(e){var t;return w(e.password).then((function(t){return v().signInWithEmailAndPassword(e.email,t)})).then((function(e){return localStorage.setItem("uid",JSON.stringify(e.user.uid)),t=e,v().currentUser.getIdToken()})).then((function(e){return E.setToken(e),t}))},loginCatch:function(e){console.log(e,e.code,"auth/user-not-found"===e.code),"auth/wrong-password"===e.code?O.a.error(S.login.invalidPass,T):"auth/user-not-found"===e.code?O.a.error(S.login.invalidUser,T):O.a.error(e.message,T)},logout:function(e){e.preventDefault(),v().signOut().then((function(){O.a.success("You've been signed out of the app",{position:"bottom-center"})}))},validateSignup:function(e){return e.username?!e.name||e.name.length<=2?{name:"Must enter a longer name"}:!e.email||e.email.length<=5?{email:"Invalid email"}:e.password&&e.confirm?e.password!==e.confirm?{password:"Passwords don't match"}:{}:{password:"Password can't be empty"}:{username:"Must enter a valid username"}}},I={home:"/",app:"/app",project:function(e){return"".concat(I.app,"/").concat(e)},login:"/login",signup:"/signup",inboxUrl:"inbox"};n(141);var L=function(e){var t=e.children,n=e.title,r=e.loading;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"flex-column vh-100 place-center"+(r?" loader-input cover":""),children:Object(a.jsxs)("div",{className:"login-box",children:[n&&Object(a.jsx)("h5",{className:"mt-5",children:n}),t]})})})};var F=function(){var e=Object(u.g)(),t=Object(r.useState)(!!localStorage.getItem("user")),n=Object(i.a)(t,2),s=n[0],o=n[1],d=Object(r.useState)({}),h=Object(i.a)(d,2),m=h[0],f=h[1],x=Object(r.useState)(!1),g=Object(i.a)(x,2),v=g[0],k=g[1],w=Object(r.useState)({}),N=Object(i.a)(w,2),C=N[0],y=N[1];function P(){return(P=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=E.validateSignup(m),(a=Object.values(n)).length?(y(n),a.length&&O.a.error(a[0],T)):(k(!0),E.signup(m).then((function(e){k(!1),e.user&&(O.a.success(S.login.signupSuccess,T),f({}),o(!0))})).catch((function(e){var t=e.response;if(t.data&&t.data.code)E.loginCatch(t.data);else{y(t.data);var n=Object.values(t.data);n.length&&O.a.error(n[0],T)}k(!1)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.useContext(ue)?(e.push(I.app),null):Object(a.jsx)(a.Fragment,{children:s?Object(a.jsx)(u.a,{to:"/app"}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(L,{title:S.login.signup,loading:v,children:Object(a.jsxs)("form",{onSubmit:function(e){return P.apply(this,arguments)},className:"flex-center-self",children:[Object(a.jsx)("input",{value:m.email||"",onChange:function(e){return f(Object(p.a)(Object(p.a)({},m),{},{email:e.target.value}))},placeholder:"email",type:"email",required:!0,autoFocus:!0,autoComplete:"off"}),C.email&&Object(a.jsx)("small",{children:C.email}),Object(a.jsx)("input",{value:m.name||"",onChange:function(e){return f(Object(p.a)(Object(p.a)({},m),{},{name:e.target.value}))},placeholder:"name",required:!0,autoComplete:"off"}),C.name&&Object(a.jsx)("small",{children:C.name}),Object(a.jsx)("input",{value:m.username||"",onChange:function(e){return f(Object(p.a)(Object(p.a)({},m),{},{username:e.target.value}))},placeholder:"username",required:!0,autoComplete:"off"}),C.username&&Object(a.jsx)("small",{children:C.username}),Object(a.jsx)("input",{value:m.password||"",onChange:function(e){return f(Object(p.a)(Object(p.a)({},m),{},{password:e.target.value}))},placeholder:"password",type:"password",required:!0,autoComplete:"off"}),C.password&&Object(a.jsx)("small",{children:C.password}),Object(a.jsx)("input",{value:m.confirm||"",onChange:function(e){return f(Object(p.a)(Object(p.a)({},m),{},{confirm:e.target.value}))},placeholder:"confirm",type:"password",required:!0,autoComplete:"off"}),C.password&&Object(a.jsx)("small",{children:C.password}),Object(a.jsxs)("div",{className:"flex-row",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-block",children:S.login.signup}),Object(a.jsxs)(l.b,{to:I.login,className:"btn-flat",children:[S.login.yesAccount," ",S.login.login]})]})]})})})})};var A=function(){var e=Object(u.g)(),t=Object(r.useState)(!1),n=Object(i.a)(t,2),s=n[0],o=n[1],d=Object(r.useState)({}),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(r.useState)(!!localStorage.getItem("user")),f=Object(i.a)(m,2),x=f[0],g=f[1];return c.a.useContext(ue)?(e.push(I.app),null):Object(a.jsx)(a.Fragment,{children:x?Object(a.jsx)(u.a,{to:I.app}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(L,{title:S.login.login,loading:s,children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(!0),E.login(b).then((function(e){o(!1),e.user?(g(!0),O.a.success(S.login.success,T)):(400===e.error.code&&O.a.error(S.login.error,T),console.info(e))})).catch((function(e){o(!1),E.loginCatch(e)}))},className:"flex-center-self",children:[Object(a.jsx)("input",{value:b.email||"",onChange:function(e){return h(Object(p.a)(Object(p.a)({},b),{},{email:e.target.value}))},placeholder:"email",type:"email",autoFocus:!0,required:!0}),Object(a.jsx)("input",{value:b.password||"",onChange:function(e){return h(Object(p.a)(Object(p.a)({},b),{},{password:e.target.value}))},placeholder:"password",type:"password",autoComplete:"off",required:!0}),Object(a.jsxs)("div",{className:"flex-row",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-block",children:S.login.login}),Object(a.jsxs)(l.b,{to:I.signup,className:"btn-flat right",children:[S.login.noAccount," ",S.login.signup]})]})]})})})})},U=function(e,t){window.lastError=t,O.a.error(e,T),console.error(e,t),["401","403"].indexOf(t.toString().split(" ").pop())>=0&&(localStorage.removeItem("user"),localStorage.removeItem("AuthToken"),window.location.hash=I.login)};function D(e){var t=new Date(e);return t.getUTCFullYear()+"/"+(t.getUTCMonth()+1)+"/"+t.getUTCDate()+" "+t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds()}var M={db:k(),headers:function(){return{authorization:localStorage.getItem("AuthToken")}},updateTask:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Updating task ",t.name),e.prev=1,e.next=4,m()({url:f.url+"/project/".concat(t.projectId,"/task/").concat(t.id),method:"PUT",data:t,headers:M.headers()}).then((function(e){console.info("result from PUT",e),O.a.success(e.data.message,T)}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),U("Error on update task: "+e.t0.response.data.message,e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),addTask:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Adding task ",t.name),e.prev=1,e.next=4,m()({url:f.url+"/project/".concat(t.projectId,"/task"),method:"POST",data:t,headers:M.headers()}).then((function(e){return console.info("result from POST",e),O.a.success(e.data.message,T),e.data.taskId}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),U("Error on save task: "+e.t0.response.data.message,e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),deleteTask:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:f.url+"/project/".concat(t.projectId,"/task/").concat(t.id),method:"DELETE",headers:M.headers()}).then((function(e){console.info("result from DELETE",e),O.a.success(e.data.message,T)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),U("Error on delete task: "+e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getTasksForProject:function(e,t){try{return M.db.collection("/projects/".concat(e,"/tasks")).orderBy("level","desc").orderBy("timestamp","desc").onSnapshot((function(n){var a={};n.forEach((function(t){var n=t.id,r=t.data(),c=r.parentId||"root_task";a[c]=a[c]||[],a[c].push(Object(p.a)(Object(p.a)({id:n},r),{},{projectId:e,timestamp:D(1e3*r.timestamp.seconds),subtasks:a[n]||[]})),delete a[n]})),t(a.root_task||[])}))}catch(n){U("Error on fetching tasks: ",n)}},toggleTask:function(e){try{return M.db.doc("/projects/".concat(e.projectId,"/tasks/").concat(e.id)).update({checked:e.checked,expanded:e.expanded})}catch(t){U('Error on updating "checked" task: ',t)}}},_=M;var B=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],o=c.a.useContext(ue);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"btn-invisible",onClick:function(){return s(!0)},children:Object(a.jsx)("i",{className:"material-icons",children:"settings"})}),n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{className:"dropdown dd-left dd-big",onClick:function(){return s(!1)},children:[Object(a.jsx)("li",{className:"dropdown-item",children:Object(a.jsx)("span",{className:"left subtle ps-6",children:S.loggedInAs(o.email)})}),Object(a.jsx)("li",{className:"dropdown-item",children:Object(a.jsx)("button",{className:"btn-invisible left left-align w-100",onClick:E.logout,children:S.login.logout})})]}),Object(a.jsx)("div",{className:"backdrop",onClick:function(){return s(!1)}})]})]})};var z=function(e){var t=e.setShowSidebar,n=e.showSidebar;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"navbar-fixed",children:Object(a.jsx)("nav",{className:"grey",children:Object(a.jsxs)("div",{className:"nav-wrapper",children:[Object(a.jsx)("a",{className:"sidenav-btn btn-subtle",onClick:function(){return t(!n)},children:Object(a.jsx)("i",{className:"material-icons",children:"menu"})}),Object(a.jsx)("ul",{className:"right",children:Object(a.jsx)("li",{children:Object(a.jsx)(B,{})})})]})})})})},K={db:k(),headers:function(){return{authorization:localStorage.getItem("AuthToken")}},getProject:function(e,t){try{return K.db.doc("/projects/".concat(e)).onSnapshot((function(e){var n=e.data();n.id=e.id,console.info('Changed to project "'.concat(n.name,'"')),t(n)}))}catch(n){U("Error on fetching Project: ",n)}},getListOfProjects:function(e){try{return K.db.collection("/projects").where("_uids","array-contains",v().currentUser.uid).onSnapshot((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push({id:e.id,name:t.name,shared:t.shared,showCompleted:t.showCompleted,color:t.color})})),e(n),console.info("Lists loaded: ",n.length)}))}catch(t){U("Error on fetching tasks: ",t)}},updateProject:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Updating project ",t),e.prev=1,e.next=4,m()({url:f.url+"/project/".concat(t.id),method:"PUT",data:t,headers:K.headers()}).then((function(e){O.a.success(e.data.message,T),console.info("result from Edit Project PUT",e)}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),U("Error on save project name: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),newProject:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:f.url+"/project",method:"POST",data:t,headers:K.headers()}).then((function(e){return O.a.success(e.data.message,T),e.data.project}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),U("Error on create project: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:f.url+"/project/".concat(t.id),method:"DELETE",headers:K.headers()}).then((function(e){O.a.success(e.data.message,T),console.info("result from project DELETE",e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),U("Error on delete project: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getUserByEmail:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:f.url+"/user/search/",method:"POST",data:{email:t},headers:K.headers()}).then((function(e){return e.data.user}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),U("Error on searching email: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),addUserToProject:function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:f.url+"/project/".concat(t.id,"/join"),method:"POST",headers:K.headers(),data:{username:n}}).then((function(e){O.a.success(e.data.message,T),console.info("result from joining Project",e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),U("Error on joining project: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},q=K;n(147);var H=function(e){return e.projectId||(O.a.error("no project id!",T),console.log(e)),{name:e.name||"",checked:e.checked||!1,id:e.id||null,timestamp:e.timestamp||new Date,level:e.level||0,parentId:e.parentId||null,description:e.description||"",projectId:e.projectId}};var W=function(e){var t=e.projectFunctions,n=e.toggleShowCompleted,c=e.isLoading,s=Object(r.useContext)(re);return t.editListName?Object(a.jsx)("form",{onSubmit:t.saveListName,className:"name"===c?" loader-input":"",children:Object(a.jsx)("input",{className:"as-title m0 invisible h5",autoFocus:!0,value:t.projectName,disabled:"name"===c,onBlur:function(){return t.setEditListName(!1)},onChange:function(e){return t.setProjectName(e.target.value)}})}):Object(a.jsxs)("div",{className:"flex-row",children:[Object(a.jsx)("h5",{className:"max-content m0",onClick:function(){return t.setEditListName(!0)},children:t.projectName}),s.showCompleted?Object(a.jsx)("button",{className:"material-icons ml-5 toggle-completed btn-invisible subtle o-3",onClick:function(){return n(!1)},title:S.hideCompleted,children:"check_box"}):Object(a.jsx)("button",{className:"material-icons ml-5 toggle-completed btn-invisible subtle o-3",onClick:function(){return n(!0)},title:S.showCompleted,children:"check_box_outline_blank"})]})};n(148);var J=function(e){var t=e.children,n=e.modalOpen,r=e.okButton,c=e.cancelButton,s=e.onAccept,o=e.onCancel,i=e.loading;return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"z-depth-5 modal",children:Object(a.jsxs)("div",{className:i?" loader-input cover":"",children:[Object(a.jsx)("div",{className:"modal-content",children:t}),Object(a.jsxs)("div",{className:"modal-footer",children:[r&&Object(a.jsx)("button",{onClick:s,className:"modal-close waves-effect waves-green btn-flat btn",dangerouslySetInnerHTML:{__html:r}}),c&&Object(a.jsx)("button",{onClick:o,className:"modal-close waves-effect waves-red btn-flat btn left",dangerouslySetInnerHTML:{__html:c}})]})]})}),Object(a.jsx)("div",{className:"backdrop",onClick:o})]}):""})};var Y=function(e){var t=e.trigger,n=e.task,c=e.modalOpen,s=e.setModalOpen,o=Object(r.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],h=Object(r.useState)(""),m=Object(i.a)(h,2),f=m[0],O=m[1],x=Object(r.useState)(n.subtasks||[]),g=Object(i.a)(x,2),v=g[0],k=g[1],w=Object(r.useState)(n.name||""),N=Object(i.a)(w,2),C=N[0],y=N[1],T=Object(r.useState)(n.description||""),P=Object(i.a)(T,2),E=P[0],I=P[1],L=Object(r.useContext)(re);function F(e){return A.apply(this,arguments)}function A(){return(A=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!0),e.next=4,_.updateTask(Object(p.a)(Object(p.a)({},n),{},{name:C,description:E}));case 4:d(!1),s(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.checked=!t.checked,e.next=3,_.toggleTask(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,_.addTask(H({name:f,parentId:n.id,level:n.level+1,projectId:L.id}));case 3:t.target[0].value="";case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){y(n.name||""),k(n.subtasks||[]),I(n.description||"")}),[n]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:t.className,onClick:function(){return s(!0)},children:t.text}),Object(a.jsxs)(J,{modalOpen:c,loading:u,onAccept:F,onCancel:function(){return s(!1)},okButton:S.task.save+' <i class="material-icons right">save</i>',cancelButton:S.task.discard+' <i class="material-icons right">cancel</i>',children:[Object(a.jsx)("h6",{className:"subtle mb-15 mt-5",children:L.name}),Object(a.jsxs)("form",{onSubmit:F,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:S.task.name}),Object(a.jsx)("input",{value:C,required:!0,minLength:3,placeholder:S.task.addPh,onChange:function(e){return y(e.target.value)}})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:S.task.notes}),Object(a.jsx)("input",{value:E,className:"materialize-textarea",placeholder:S.task.notesPh,onChange:function(e){return I(e.target.value)}})]})]}),Object(a.jsxs)("ul",{className:"list-unstyled flex-column",children:[(v||[]).map((function(e){return Object(a.jsxs)("li",{title:e.timestamp,className:"block",children:[Object(a.jsxs)("label",{className:"left",children:[Object(a.jsx)("input",{type:"checkbox",checked:e.checked,id:e.id,className:"material-cb",onChange:function(){return function(e){return U.apply(this,arguments)}(e)}}),Object(a.jsx)("div",{})]}),Object(a.jsx)("span",{className:"left",children:e.name})]},e.id)})),Object(a.jsx)("li",{children:Object(a.jsxs)("form",{onSubmit:function(e){return D.apply(this,arguments)},children:[Object(a.jsx)("label",{children:S.subtasks}),Object(a.jsx)("input",{onChange:function(e){return O(e.target.value)},placeholder:S.task.addSubtaskPh,className:"input-field",required:!0,minLength:3})]})},"new-subtask")]})]})]})};var G=function e(t){var n=t.task,c=t.level,s=Object(r.useState)(n.subtasks||[]),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(!1),h=Object(i.a)(d,2),m=h[0],f=h[1],O=Object(r.useState)(n.expanded||!1),x=Object(i.a)(O,2),g=x[0],v=x[1],k=Object(r.useContext)(re),w=l.filter((function(e){return!e.checked})).length||0,N=n.checked?k.showCompleted?"done":"hidden":"",C=(k.showCompleted?l.length:w)?"":" v-hidden";function y(){return(y=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.checked=!t.checked,t.checked&&(t.expanded=!1),e.next=4,_.toggleTask(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(S.task.delete)){e.next=3;break}return e.next=3,_.deleteTask(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){u(n.subtasks||[])}),[n.subtasks]),Object(a.jsxs)("li",{className:N+" task",title:n.timestamp,children:[Object(a.jsxs)("div",{className:"task-content parent-hover",children:[Object(a.jsx)("button",{className:"toggle-expand subtle btn-invisible material-icons tiny left "+(g?" expanded":"")+C,onClick:function(){return function(e){return T.apply(this,arguments)}(!g)},children:"chevron_right"}),Object(a.jsxs)("label",{className:"left",children:[Object(a.jsx)("input",{type:"checkbox",className:"material-cb",checked:n.checked,onChange:function(){return function(e){return y.apply(this,arguments)}(n)}}),Object(a.jsx)("div",{})]}),Object(a.jsxs)("button",{className:"btn-invisible "+(n.checked,""),onClick:function(){return f(!0)},children:[Object(a.jsx)("span",{className:"task-name",children:n.name}),l.length>0&&Object(a.jsxs)("small",{className:"subtle child-hover ml-5",title:S.subtaskStatus,children:["(",w," / ",l.length-w,")"]}),n.description&&Object(a.jsx)("small",{className:"subtle ml-5",children:n.description})]}),Object(a.jsxs)("span",{className:"right",children:[Object(a.jsx)("button",{className:"child-hover btn-invisible ml-5 material-icons right subtle",onClick:function(){return function(){return E.apply(this,arguments)}(n)},children:"delete"}),Object(a.jsx)(Y,{trigger:{className:"child-hover btn-invisible ml-5 material-icons right subtle",text:"edit"},task:Object(p.a)({},n),modalOpen:m,setModalOpen:f})]})]}),g&&Object(a.jsx)(a.Fragment,{children:n.level<P&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("ul",{className:"subtasks","aria-details":c,children:l.map((function(t){return Object(a.jsx)(e,{task:t,level:c+1},t.id)}))})})})]})};var R=function(e){var t,n=e.project,c=e.projectKey,s=e.setProject,o=Object(r.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],h=Object(r.useState)(""),m=Object(i.a)(h,2),f=m[0],O=m[1],x=Object(r.useState)(n.showCompleted),g=Object(i.a)(x,2),v=g[0],k=g[1],w=Object(r.useState)(!1),N=Object(i.a)(w,2),C=N[0],y=N[1],T=Object(r.useState)(n.name||S.noListName),P=Object(i.a)(T,2),E=P[0],I=P[1],L=Object(r.useState)(!1),F=Object(i.a)(L,2),A=F[0],U=F[1],D=u.filter((function(e){return!e.checked})),M=u.filter((function(e){return!!e.checked})),B=Object(r.useMemo)((function(){return S.allTasksCompleted()}),[D.length]),z=Object(r.useMemo)((function(){return k(n.showCompleted),S.task.addTaskPh()}),[n.id]),K="";function J(){return(J=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O("task"),console.log(H({name:K,projectId:n.id})),e.next=5,_.addTask(H({name:K,projectId:n.id}));case 5:e.sent,t.target[0].value="",O("");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t),e.next=3,V({showCompleted:t});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V({color:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O("name"),e.next=4,V({name:E});case 4:U(!1),O("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return(X=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.updateProject(Object(p.a)(Object(p.a)({},n),t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){I(n.name)}),[n.name]),Object(r.useEffect)((function(){var e=q.getProject(c,s),t=_.getTasksForProject(c,d);return function(){e&&e(),t&&t()}}),[c]),t={open:D,completed:M,addTask:function(e){return J.apply(this,arguments)},taskNameChange:function(e){K=e.target.value},showCompleted:v,toggleShowCompleted:function(e){return Y.apply(this,arguments)},modalOpen:C,allCompleted:B,setModalOpen:y,isLoading:f,addTaskPh:z,project:{projectName:E,saveListName:function(e){return Q.apply(this,arguments)},editListName:A,setEditListName:U,setProjectName:I,changeColor:function(e){return R.apply(this,arguments)}}},Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(W,{projectFunctions:t.project,toggleShowCompleted:t.toggleShowCompleted,isLoading:t.isLoading}),Object(a.jsxs)("ul",{children:[t.open.length?t.open.map((function(e){return Object(a.jsx)(G,{task:e,level:0},e.id)})):t.completed.length?Object(a.jsx)("li",{children:Object(a.jsx)("h5",{className:"subtle max-content ml-50",children:t.allCompleted})}):"",t.showCompleted&&t.completed.map((function(e){return Object(a.jsx)(G,{task:e},e.id)})),Object(a.jsx)("li",{className:"task",children:Object(a.jsxs)("form",{onSubmit:t.addTask,className:"flex-row task-content form-inline"+("task"===t.isLoading?" loader-input":""),children:[Object(a.jsx)("i",{className:"material-icons left v-hidden mr-11",children:"add"}),Object(a.jsx)("i",{className:"material-icons left subtle",children:"add"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:"input-group mb-2",children:Object(a.jsx)("input",{onChange:t.taskNameChange,className:"invisible f-100",placeholder:t.addTaskPh,required:!0,disabled:"task"===t.isLoading,autoComplete:"off"})})})]})})]})]})};var Q=function(e){var t=e.setShowSidebar;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"h-100 place-center",children:Object(a.jsx)("button",{className:"btn-invisible left-align flex-center-self",onClick:function(){return t(!0)},children:S.project.noSelected})})})};n(149);var V=function(e){var t=e.project,n=e.onAction,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"btn-invisible child-hover ch-hidden left",onClick:function(){return l(!0)},children:Object(a.jsx)("i",{className:"tiny material-icons subtle",children:"more_horiz"})}),o&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{className:"dropdown dd-right",onClick:function(){return l(!1)},children:[Object(a.jsx)("li",{className:"dropdown-item",children:Object(a.jsxs)("button",{className:"btn-invisible left left-align w-100",onClick:function(){return n("delete",t)},children:[Object(a.jsx)("i",{className:"tiny material-icons subtle",children:"delete"})," ",S.project.delete._]})}),Object(a.jsx)("li",{className:"dropdown-item",children:Object(a.jsxs)("button",{className:"btn-invisible left left-align w-100",onClick:function(){return n("share",t)},children:[Object(a.jsx)("i",{className:"tiny material-icons subtle",children:"people_outline"})," ",S.project.share]})})]}),Object(a.jsx)("div",{className:"backdrop",onClick:function(){return l(!1)}})]})]})},X=n(110);var Z=function(e){var t=e.onChangeComplete,n=e.color,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("span",{className:"relative",children:[Object(a.jsx)("button",{className:"btn-invisible h-100",onClick:function(){return l(!0)},children:Object(a.jsx)("span",{className:"btn-colorpicker",style:{backgroundColor:n}})}),o?Object(a.jsxs)("div",{className:"colorpicker",children:[Object(a.jsx)("div",{className:"backdrop",onClick:function(){return l(!1)}}),Object(a.jsx)(X.a,{color:n,onChangeComplete:function(e){l(!1),t(e.hex)}})]}):""]})})};var $=function(e){var t=e.projectKey,n=e.setProjectKey,c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(r.useState)([]),d=Object(i.a)(u,2),h=d[0],m=d[1],f=Object(r.useState)(""),x=Object(i.a)(f,2),g=x[0],v=x[1];function k(e){return w.apply(this,arguments)}function w(){return(w=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(S.project.delete.long)){e.next=6;break}return l(t.id),e.next=4,q.deleteProject(t);case 4:n(""),l("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){e!==t&&n(e)}function C(){return(C=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.updateProject(Object(p.a)(Object(p.a)({},t),{},{color:n}));case 2:a=e.sent,console.log("RESULT",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return P.apply(this,arguments)}function P(){return(P=Object(b.a)(j.a.mark((function e(t,n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="delete"===e.t0?3:"share"===e.t0?6:17;break;case 3:return e.next=5,k(n);case 5:return e.abrupt("break",18);case 6:return a=prompt("User Email to join?"),e.next=9,q.getUserByEmail(a);case 9:if(r=e.sent){e.next=14;break}return O.a.error(S.genericError),console.error("error: ",r),e.abrupt("return");case 14:return e.next=16,q.addUserToProject(n,r.username);case 16:case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=q.getListOfProjects((function(e){var a=function(e,t){return e&&t.filter((function(t){return t.id===e})).length?e:""}(t,e);a&&n(a),m(e)}));return function(){e&&e()}}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h5",{className:"center-align",children:S.project.s}),Object(a.jsxs)("ul",{className:"projects-list flex-column",children:[Object(a.jsxs)("li",{className:"mb-5 parent-hover flex-row"+(t===I.inboxUrl?" selected":""),children:["\xa0\xa0\xa0\xa0\xa0",Object(a.jsx)("button",{className:"btn-invisible left left-align ps-6",onClick:function(){return N(I.inboxUrl)},children:S.drawer.inbox._})]},I.inboxUrl),h.map((function(e){return Object(a.jsxs)("li",{className:"mb-5 parent-hover flex-row"+(t===e.id?" selected":"")+(o===e.id?" loader-input":""),children:[Object(a.jsx)(V,{project:e,onAction:T}),Object(a.jsx)(Z,{color:e.color,onChangeComplete:function(t){return function(e,t){return C.apply(this,arguments)}(e,t)}}),Object(a.jsxs)("button",{className:"btn-invisible left left-align ps-6",onClick:function(){return N(e.id)},children:[e.name,e.shared&&Object(a.jsx)("i",{className:"tiny material-icons subtle left mr-5",title:S.sharedProject,children:"people_outline"})]})]},e.id)})),Object(a.jsxs)("li",{className:"mb-5 parent-hover flex-row",children:[Object(a.jsx)("button",{className:"btn-invisible child-hover ch-hidden left",children:Object(a.jsx)("label",{htmlFor:"new-project-input",className:"pointer",children:Object(a.jsx)("i",{className:"tiny material-icons subtle",children:"add"})})}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),l("new"),q.newProject({name:g,color:y}).then((function(e){v(""),l(""),n(e.id)}))},className:"add-project flex-row"+("new"===o?" loader-input":""),children:Object(a.jsx)("input",{className:"invisible left-align",onChange:function(e){return v(e.target.value)},required:!0,minLength:"3",disabled:"new"===o,autoComplete:"off",value:g,id:"new-project-input",placeholder:S.project.add.ph})})]},"new-project")]})]})},ee={db:k(),headers:function(){return{authorization:localStorage.getItem("AuthToken")}},getDrawer:function(e,t){try{var n,a=ee.db.collectionGroup("tasks");switch(e){case I.inboxUrl:n=a.where("checked","==",!1).orderBy("timestamp","desc");break;default:return O.a.error(S.invalidDrawer),t([]),function(){}}if(n)return n.onSnapshot((function(e){var n=[];e.forEach((function(e){var t=e.data();n.push(Object(p.a)({id:e.id},t))})),t(n),console.info("Tasks in inbox: ",n.length)}))}catch(r){U("Error on fetching drawer: ",r)}}},te=ee;var ne=function(e){return[I.inboxUrl].indexOf(e)>=0};var ae=function(e){var t=e.projectKey,n=Object(r.useState)(!0),c=Object(i.a)(n,2),s=(c[0],c[1]),o=Object(r.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(r.useMemo)((function(){return S.allTasksCompleted()}),[]);return Object(r.useEffect)((function(){if(ne(t)){var e=te.getDrawer(t,(function(e){d(e),s(!1)}));return function(){e&&e()}}}),[t]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"flex-row",children:Object(a.jsx)("h5",{className:"max-content m0",children:S.drawer.inbox._})}),Object(a.jsx)("ul",{children:u.length?u.map((function(e){return console.log("task is T",e),Object(a.jsx)(G,{task:e,level:0},e.id)})):Object(a.jsx)("li",{children:Object(a.jsx)("h5",{className:"subtle max-content ml-50",children:j})})})]})},re=c.a.createContext({});var ce=function(){var e=Object(u.g)(),t=Object(u.h)().projectKeyParam,n=Object(r.useState)(t||""),s=Object(i.a)(n,2),o=s[0],l=s[1],d=Object(r.useState)({}),j=Object(i.a)(d,2),p=j[0],b=j[1],h=Object(r.useState)(!window.isSmallScreen),m=Object(i.a)(h,2),f=m[0],O=m[1];return Object(r.useEffect)((function(){o!==String(t)&&e.push(I.project(o))}),[o]),c.a.useContext(ue)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(z,{setShowSidebar:O,showSidebar:f}),Object(a.jsxs)("div",{id:"todo-app",className:f?"":" hidden-bar",children:[Object(a.jsx)("div",{className:"projects-list-box",children:Object(a.jsx)("div",{className:"projects-list-box-inner",children:Object(a.jsx)($,{projectKey:o,setProjectKey:l})})}),Object(a.jsx)("div",{className:"tasks-list-box flex-column",children:Object(a.jsx)(re.Provider,{value:p,children:o?ne(o)?Object(a.jsx)(ae,{projectKey:o}):Object(a.jsx)(R,{projectKey:o,project:p,setProject:b}):Object(a.jsx)(Q,{setShowSidebar:O})})}),Object(a.jsx)("i",{})," "]})]}):(e.push(I.login),null)};n(256);var se=function(){return Object(a.jsx)("span",{className:"app-loader",children:Object(a.jsx)("span",{className:"loader-img"})})};var oe=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("footer",{className:"page-footer grey",children:[Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col l6 s12",children:[Object(a.jsx)("h5",{className:"white-text",children:"Footer Content"}),Object(a.jsx)("p",{className:"grey-text text-lighten-4",children:"You can use rows and columns here to organize your footer content."})]}),Object(a.jsxs)("div",{className:"col l4 offset-l2 s12",children:[Object(a.jsx)("h5",{className:"white-text",children:"Links"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 1"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 2"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 3"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 4"})})]})]})]})}),Object(a.jsx)("div",{className:"footer-copyright",children:Object(a.jsxs)("div",{className:"container",children:["\xa9 2014 Copyright Text",Object(a.jsx)("a",{className:"grey-text text-lighten-4 right",href:"#!",children:"More Links"})]})})]})})};var ie=function(e){var t=e.loaded,n=Object(r.useContext)(ue);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("nav",{className:"grey",children:Object(a.jsxs)("div",{className:"nav-wrapper container",children:[Object(a.jsx)(l.b,{to:I.app,className:"brand-logo",children:"Todo List"}),Object(a.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:n?t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:I.app,children:S.gotoApp})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#logout",onClick:E.logout,className:"btn-invisible",children:S.login.logout})})]}):t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:I.login,children:S.login.login})}),Object(a.jsx)("li",{children:Object(a.jsx)(l.b,{to:I.signup,children:S.login.signup})})]})})]})})})};var le=function(e){var t=e.loaded;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ie,{loaded:t}),Object(a.jsx)("div",{style:{height:"300px",display:"block"},children:Object(a.jsx)("h4",{className:"flex-center-self center-align",children:"Welcome to the best todo-app"})}),Object(a.jsx)(oe,{})]})},ue=c.a.createContext({});var de=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(i.a)(s,2),d=o[0],j=o[1];return E.authState((function(e){console.info("User logged in: ",!!e),j(e),c(!0)})),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(ue.Provider,{value:d,children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:I.home,exact:!0,children:Object(a.jsx)(le,{loaded:n})}),n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u.b,{path:I.signup,component:F}),Object(a.jsx)(u.b,{path:I.login,component:A}),Object(a.jsx)(u.b,{path:"".concat(I.project(":projectKeyParam?")),component:ce})]}):Object(a.jsx)(se,{})]})})})})};o.a.render(Object(a.jsx)(de,{}),document.getElementById("root"))}},[[257,1,2]]]);
//# sourceMappingURL=main.9be3bcf5.chunk.js.map