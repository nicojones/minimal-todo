(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{124:function(e,t,n){},125:function(e,t){},126:function(e,t){window.isSmallScreen=!1,window.onresize=function(){window.isSmallScreen=window.innerWidth<800,document.getElementById("root").className=window.isSmallScreen?"mobile":"desktop"},window.onresize()},150:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),c=n.n(a),s=n(37),i=n.n(s),o=(n(124),n(125),n(126),n(5)),l=n(18),u=n(10),d=n(3),j=n.n(d),b=n(8),p=n(7),h=n(14),m=n.n(h),f={production:!0,firebase:{apiKey:"AIzaSyDxmJzv3ccl0_ouKB9oVSzWIsn6uysYMLQ",databaseURL:"https://todo-list-react-33431.firebaseio.com",projectId:"todo-list-react-33431",authDomain:"todo-list-react-33431.firebaseapp.com",storageBucket:"todo-list-react-33431.appspot.com",messagingSenderId:"153291173882",appId:"1:153291173882:web:4eb5673b9a70ce5828fe43",measurementId:"G-BCMCPMQHDB"},url:"https://us-central1-todo-list-react-33431.cloudfunctions.net/api"};var O=f,x=n(48);n(144),n(146);x.a.initializeApp(f.firebase);var g=x.a.auth,v=x.a.firestore;function k(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder("utf-8").encode(t),e.next=3,crypto.subtle.digest("SHA-1",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return e[Math.floor(Math.random()*e.length)]}var y,C,S={gotoApp:"Open app",task:{name:"Name of the task",delete:{_:"Delete Task",all:"Delete task and its subtasks? Can't be undone"},addTaskPh:function(){return N(["e.g. Buy carrots","e.g. Clean apartment in the morning","e.g. Do some exercise","Add a new task ...","Create a task ...","e.g. Call family","e.g. Schedule interview"])},subtasks:"Subtasks",save:"Save Task",edit:"Edit Task",discard:"Cancel changes",notes:"Notes",prio:{_:"Priority",low:"Low priority",high:"High priority",urgent:"Urgent"},search:"Search..."},drawer:{inbox:{_:"Inbox",tooltip:"Your open tasks"},priority:{_:"Priority",tooltip:"High priority stuff"},invalidDrawer:"Invalid URL (not an actual project)"},sharedProject:"This project is shared",subtaskStatus:"( Pending / Completed )",allTasksCompleted:function(){return N(["\ud83d\ude01 All tasks completed!","Now that's what I call a clean list \ud83e\udd73","Wow, such empty \ud83d\udc4f","Finitto? Go for a cappuccino \u2615\ufe0f","All tasks done, time for a break \ud83c\udfd6","So productive. I'm impressed \ud83d\ude0e","Make a Todolist: Done \u2705","I am Finnish \ud83c\uddeb\ud83c\uddee with all tasks."])},completed:"Completed",completedNo:"No completed tasks",showCompleted:"Show completed tasks",hideCompleted:"Hide completed tasks",project:{s:"Projects",noSelected:"Select a project or create a new one.",inspire:"What will you accomplish?",share:"Share Project",delete:{_:"Delete Project",tasks:"Delete all tasks",long:"Delete this project and all the tasks? (cannot be undone)"},add:{ph:"Enter a name for a new project"},title:{_:"Click to edit title"},more:"More options"},genericError:"An error occurred. Please see console for details",loggedInAs:function(e){return"Logged in as ".concat(e)},login:{login:"Log in",signup:"Sign up",logout:"Log out",noAccount:"Don't have an account?",yesAccount:"Already a user?",error:"Invalid credentials",success:"Welcome Back!",signupSuccess:"Account created! Logging you in...",invalidPass:"Invalid Login credentials",invalidUser:"No user exists for this email",f:{email:{_:"Email",ph:"Enter your email"},password:{_:"Password",ph:"Enter your password"},name:{_:"Name",ph:"What's your name?"},username:{_:"Username",ph:"Choose a username"}}},sort:{_:"Sort tasks",az:"A - Z",za:"Z - A",nf:"Newest first",of:"Oldest First",pr:"Priority"},menu:{menu:"Enter <i>Focus Mode</i>",settings:{_:"Settings"}}},_=n(115),T=n(25),P={home:"/",app:"/app",project:function(e){return"".concat(P.app,"/").concat(e)},login:"/login",signup:"/signup",inboxUrl:"inbox",priorityUrl:"priority"},E={defaultProjectColor:"#aaa",toast:{position:"bottom-center",renderIcon:function(){return""},onClick:function(){return window.hideCogoToast()}},maxDepth:3,defaultSort:"timestamp,desc",sort:[{icon:"sort_by_alpha",name:S.sort.az,sort:"_name_lower,asc"},{icon:"sort_by_alpha",name:S.sort.za,sort:"_name_lower,desc"},{icon:"arrow_downward",name:S.sort.of,sort:"timestamp,asc"},{icon:"arrow_upward",name:S.sort.nf,sort:"timestamp,desc"},{icon:"flag",name:S.sort.pr,sort:"priority,desc"}],drawerSort:(y={},Object(T.a)(y,P.inboxUrl,"timestamp,desc"),Object(T.a)(y,P.priorityUrl,"priority,desc"),y)},I=function(e,t){var n=_.a[e](t,E.toast);window.hideCogoToast=n.hide},F={setToken:function(e){localStorage.setItem("AuthToken",e)},authState:function(e){g().onIdTokenChanged((function(t){clearTimeout(C),C=setTimeout((function(){t&&t.getIdToken(!0).then((function(e){F.setToken(e)})),e(t)}),300)}))},signup:function(e){return k(e.password).then((function(t){return m()({url:"".concat(O.url,"/signup"),method:"POST",data:Object(b.a)(Object(b.a)({},e),{},{password:t})})})).then((function(t){return F.login({email:e.email,password:e.password})}))},login:function(e){var t;return k(e.password).then((function(t){return g().signInWithEmailAndPassword(e.email,t)})).then((function(e){return localStorage.setItem("uid",JSON.stringify(e.user.uid)),t=e,g().currentUser.getIdToken()})).then((function(e){return F.setToken(e),t}))},loginCatch:function(e){console.error(e,e.code,"auth/user-not-found"===e.code),"auth/wrong-password"===e.code?I("error",S.login.invalidPass):"auth/user-not-found"===e.code?I("error",S.login.invalidUser):I("error",e.message)},logout:function(e){e.preventDefault(),g().signOut().then((function(){I("success","You've been signed out of the app")}))},validateSignup:function(e){return e.username?!e.name||e.name.length<=2?{name:"Must enter a longer name"}:!e.email||e.email.length<=5?{email:"Invalid email"}:e.password?{}:{password:"Password can't be empty"}:{username:"Must enter a valid username"}}};n(150);var U=function(e){var t=e.children,n=e.title,a=e.loading;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"flex-column vh-100 place-center"+(a?" loader-input cover":""),children:Object(r.jsxs)("div",{className:"login-box",children:[n&&Object(r.jsx)("h5",{className:"mt-5",children:n}),t]})})})};var L=function(){var e=Object(u.g)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),s=n[0],i=n[1],d=Object(a.useState)({}),h=Object(o.a)(d,2),m=h[0],f=h[1],O=Object(a.useState)(!1),x=Object(o.a)(O,2),g=x[0],v=x[1],k=Object(a.useState)({}),w=Object(o.a)(k,2),N=w[0],y=w[1];if(c.a.useContext(Ne))return e.push(P.app),null;function C(){return(C=Object(p.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=F.validateSignup(m),(r=Object.values(n)).length?(y(n),r.length&&I("error",r[0])):(v(!0),F.signup(m).then((function(e){v(!1),e.user&&(I("success",S.login.signupSuccess),f({}),i(!0))})).catch((function(e){var t=e.response;if(t.data&&t.data.code)F.loginCatch(t.data);else{y(t.data);var n=Object.values(t.data);n.length&&I("error",n[0])}v(!1)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){f(Object(b.a)(Object(b.a)({},m),e))}return Object(r.jsx)(r.Fragment,{children:s?Object(r.jsx)(u.a,{to:"/app"}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(U,{"data-tip":S.login.signup,loading:g,children:Object(r.jsxs)("form",{onSubmit:function(e){return C.apply(this,arguments)},className:"flex-center-self",children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:S.login.f.name._}),Object(r.jsx)("input",{value:m.name||"",onChange:function(e){return _({name:e.target.value})},placeholder:S.login.f.name.ph,required:!0,autoComplete:"off"}),N.name&&Object(r.jsx)("small",{children:N.name})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:S.login.f.email._}),Object(r.jsx)("input",{value:m.email||"",onChange:function(e){return _({email:e.target.value})},placeholder:S.login.f.email.ph,type:"email",required:!0,autoFocus:!0,autoComplete:"off"}),N.email&&Object(r.jsx)("small",{children:N.email})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:S.login.f.username._}),Object(r.jsx)("input",{value:m.username||"",onChange:function(e){return _({username:e.target.value})},placeholder:S.login.f.username.ph,required:!0,autoComplete:"off"}),N.username&&Object(r.jsx)("small",{children:N.username})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:S.login.f.password._}),Object(r.jsx)("input",{value:m.password||"",onChange:function(e){return _({password:e.target.value})},placeholder:S.login.f.password.ph,type:"password",required:!0,autoComplete:"off"}),N.password&&Object(r.jsx)("small",{children:N.password})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"flex-column",children:[Object(r.jsx)("button",{type:"submit",className:"btn btn-block btn-invisible",children:S.login.signup}),Object(r.jsxs)(l.b,{to:P.login,className:"btn-flat",children:[S.login.yesAccount," ",S.login.login]})]})]})})})})};var D=function(){var e=Object(u.g)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),s=n[0],i=n[1],d=Object(a.useState)({}),j=Object(o.a)(d,2),p=j[0],h=j[1],m=Object(a.useState)(!1),f=Object(o.a)(m,2),O=f[0],x=f[1];return c.a.useContext(Ne)?(e.push(P.app),null):Object(r.jsx)(r.Fragment,{children:O?Object(r.jsx)(u.a,{to:P.app}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(U,{"data-tip":S.login.login,loading:s,children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(!0),F.login(p).then((function(e){i(!1),e.user?(h({}),x(!0),I("success",S.login.success)):(400===e.error.code&&I("error",S.login.error),console.info(e))})).catch((function(e){i(!1),F.loginCatch(e)}))},className:"flex-center-self",children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:S.login.f.email._}),Object(r.jsx)("input",{value:p.email||"",onChange:function(e){return h(Object(b.a)(Object(b.a)({},p),{},{email:e.target.value}))},placeholder:S.login.f.email.ph,type:"email",autoFocus:!0,required:!0})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:S.login.f.password._}),Object(r.jsx)("input",{value:p.password||"",onChange:function(e){return h(Object(b.a)(Object(b.a)({},p),{},{password:e.target.value}))},placeholder:S.login.f.password.ph,type:"password",autoComplete:"off",required:!0})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"flex-column",children:[Object(r.jsx)("button",{type:"submit",className:"btn btn-block btn-invisible",children:S.login.login}),Object(r.jsxs)(l.b,{to:P.signup,className:"btn-flat right",children:[S.login.noAccount," ",S.login.signup]})]})]})})})})};var A=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],i=c.a.useContext(Ne);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{className:"btn-invisible",onClick:function(){return s(!0)},children:Object(r.jsx)("i",{className:"material-icons",children:"settings"})}),n&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("ul",{className:"dropdown dd-left dd-big dd-high",onClick:function(){return s(!1)},children:[Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsx)("button",{className:"btn-invisible left left-align w-100",onClick:F.logout,children:S.login.logout})}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("small",{className:"left subtle btn-p",children:S.loggedInAs(i.email)})})]}),Object(r.jsx)("div",{className:"backdrop",onClick:function(){return s(!1)}})]})]})},z=(n(156),n(118));var M=function(){return window.isSmallScreen?"":Object(r.jsx)(z.a,{place:"bottom",type:"dark",effect:"solid",delayShow:1e3,html:!0})},B=function(e,t){window.lastError=t,I("error",e),console.error(e,t),["401","403"].indexOf(t.toString().split(" ").pop())>=0&&(localStorage.removeItem("user"),localStorage.removeItem("AuthToken"),window.location.hash=P.login)};function q(e){var t=new Date(e);return t.getUTCFullYear()+"/"+(t.getUTCMonth()+1)+"/"+t.getUTCDate()+" "+t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds()}var H={db:v(),headers:function(){return{authorization:localStorage.getItem("AuthToken")}},updateTask:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Updating task ",t.name),delete t.subtasks,e.prev=2,e.next=5,m()({url:O.url+"/project/".concat(t.projectId,"/task/").concat(t.id),method:"PUT",data:t,headers:H.headers()}).then((function(e){console.info("result from PUT",e),I("success",e.data.message)}));case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),B("Error on update task: "+e.t0.response.data.message,e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),addTask:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Adding task ",t.name),e.prev=1,e.next=4,m()({url:O.url+"/project/".concat(t.projectId,"/task"),method:"POST",data:t,headers:H.headers()}).then((function(e){return console.info("result from POST",e),I("success",e.data.message),e.data.taskId}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),B("Error on save task: "+e.t0.response.data.message,e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),deleteTask:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/project/".concat(t.projectId,"/task/").concat(t.id),method:"DELETE",headers:H.headers()}).then((function(e){console.info("result from DELETE",e),I("success",e.data.message)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B("Error on delete task: "+e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getTasksForProject:function(e,t,n){var r=t.split(","),a=Object(o.a)(r,2),c=a[0],s=a[1];try{return H.db.collection("/projects/".concat(e,"/tasks")).orderBy("level","desc").orderBy(c,s).onSnapshot((function(t){var r={};t.forEach((function(t){var n=t.id,a=t.data(),c=a.parentId||"root_task";r[c]=r[c]||[],r[c].push(Object(b.a)(Object(b.a)({id:n},a),{},{projectId:e,timestamp:q(1e3*a.timestamp.seconds),subtasks:r[n]||[]})),delete r[n]})),n(r.root_task||[])}))}catch(i){B("Error on fetching tasks: ",i)}},toggleTask:function(e){try{return H.db.doc("/projects/".concat(e.projectId,"/tasks/").concat(e.id)).update({checked:e.checked,expanded:e.expanded})}catch(t){B('Error on updating "checked" task: ',t)}},searchTask:function(e){try{return H.db.collectionGroup("tasks").where("_uids","array-contains",g().currentUser.uid).where("_name_lower",">=",e.toLowerCase()).where("_name_lower","<=",e.toLowerCase()+"zzz").orderBy("_name_lower","asc").get().then((function(e){var t=[];return e.forEach((function(e){t.push(Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id}))})),console.log(t),t}))}catch(t){B("Error on searching tasks: ",t)}}},W=H;var Y=function(){var e=Object(a.useContext)(Oe),t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)([]),l=Object(o.a)(i,2),u=l[0],d=l[1];return console.log("results",u.length),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{className:"left",id:"search-tasks",onSubmit:function(e){e.preventDefault(),W.searchTask(c).then((function(e){d(e),console.log("set the results",e)}))},children:[Object(r.jsx)("input",{type:"text",className:"input",placeholder:S.task.search,value:c,onChange:function(e){return s(e.target.value)}}),u.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"backdrop dark",onClick:function(){return d([])}}),Object(r.jsx)("ul",{className:"search-results dropdown dd-big",children:u.map((function(t){return Object(r.jsxs)("li",{className:"dropdown-item pointer",onClick:function(){return n=t,console.log(n),d([]),void e({id:n.projectId});var n},children:[Object(r.jsx)("i",{className:"material-icons left subtle tiny btn-pr",children:t.checked?"check_box":"check_box_outline_blank"}),t.name]},t.id)}))})]}):""]})})};var G=function(e){var t=e.setShowSidebar,n=e.showSidebar,c=Object(a.useContext)(Oe);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"navbar-fixed todo-navbar "+(n?"open":"closed"),children:Object(r.jsx)("nav",{className:"navbar-hide",children:Object(r.jsxs)("div",{className:"nav-wrapper",children:[Object(r.jsx)("button",{className:"btn-invisible sidenav-btn btn-subtle left","data-tip":S.menu.menu,onClick:function(){return t(!n)},children:Object(r.jsx)("i",{className:"material-icons",children:"menu"})}),Object(r.jsx)("button",{className:"btn-invisible sidenav-btn btn-subtle left",onClick:function(){return c({id:P.inboxUrl})},children:Object(r.jsx)("i",{className:"material-icons",children:"home"})}),Object(r.jsx)(Y,{}),Object(r.jsx)("ul",{className:"right",children:Object(r.jsx)("li",{children:Object(r.jsx)(A,{})})})]})})}),Object(r.jsx)(M,{})]})};n(157);var J=function(e){return e.projectId||(I("error","No project id!"),console.error(e)),{name:e.name||"",checked:e.checked||!1,id:e.id||null,timestamp:e.timestamp||new Date,level:e.level||0,parentId:e.parentId||null,description:e.description||"",projectId:e.projectId,priority:e.priority||0}},R={db:v(),headers:function(){return{authorization:localStorage.getItem("AuthToken")}},getListOfProjects:function(e){try{return R.db.collection("/projects").where("_uids","array-contains",g().currentUser.uid).onSnapshot((function(t){var n=[];t.forEach((function(e){var t=e.data();n.push({id:e.id,name:t.name,shared:t.shared,sort:t.sort,showCompleted:t.showCompleted,color:t.color})})),e(n),console.info("".concat(n.length," projects loaded"))}))}catch(t){B(t.response.data.message,t)}},updateProject:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/project/".concat(t.id),method:"PUT",data:t,headers:R.headers()}).then((function(e){}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B(e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),newProject:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/project",method:"POST",data:t,headers:R.headers()}).then((function(e){return I("success",e.data.message),e.data.project}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B(e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/project/".concat(t.id),method:"DELETE",headers:R.headers()}).then((function(e){I("success",e.data.message),console.info("result from project DELETE",e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B(e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),deleteProjectTasks:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/project/".concat(t.id,"/only-tasks"),method:"DELETE",headers:R.headers()}).then((function(e){I("success",e.data.message),console.info("result from project task DELETE",e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B(e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getUserByEmail:function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/user/search/",method:"POST",data:{email:t},headers:R.headers()}).then((function(e){return e.data.user}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B(e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),addUserToProject:function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:O.url+"/project/".concat(t.id,"/join"),method:"POST",headers:R.headers(),data:{username:n}}).then((function(e){I("success",e.data.message),console.info("result from joining Project",e)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),B(e.t0.response.data.message,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},K=R;n(158);var Q=function(e){var t=e.sort,n=e.setSort,c=e.children,s=Object(a.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(!1),j=Object(o.a)(d,2),b=j[0],p=j[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"buttons",children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(M,{}),t&&Object(r.jsx)("button",{className:"btn-invisible",onClick:function(){return u(!0)},"data-tip":S.sort._,children:Object(r.jsx)("i",{className:"material-icons",children:"swap_vert"})}),l&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:"dropdown dd-left dd-20 dd-high",children:E.sort.map((function(e){return Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible",onClick:function(){return n(e.sort)},children:[e.icon&&Object(r.jsx)("i",{className:"material-icons tiny left btn-p",children:e.icon}),Object(r.jsx)("span",{className:e.sort===t?" bold":"",children:e.name})]})},e.sort)}))}),Object(r.jsx)("div",{className:"backdrop",onClick:function(){return u(!1)}})]}),c&&Object(r.jsx)("button",{className:"btn-invisible",onClick:function(){return p(!0)},children:Object(r.jsx)("i",{className:"material-icons","data-tip":S.project.more,children:"more_horiz"})}),b&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:"dropdown dd-left dd-20 dd-high",children:c}),Object(r.jsx)("div",{className:"backdrop",onClick:function(){return p(!1)}})]})]})})})};var Z=function(e){var t=e.projectFunctions,n=e.isLoading,c=Object(a.useContext)(fe),s=t.showCompleted;function i(){return(i=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(S.project.delete._)){e.next=4;break}return e.next=3,K.deleteProject(c);case 3:t.setProject({deleted:!0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(S.project.delete.tasks)){e.next=3;break}return e.next=3,K.deleteProjectTasks(c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=prompt("User Email to join?"),e.next=3,K.getUserByEmail(t);case 3:if(n=e.sent){e.next=8;break}return I("error",S.genericError),console.error("error: ",n),e.abrupt("return");case 8:return e.next=10,K.addUserToProject(c,n.username);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(p.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setShowCompleted(n),e.next=3,K.updateProject(Object(b.a)(Object(b.a)({},c),{},{showCompleted:n}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsx)(r.Fragment,{children:t.editListName?Object(r.jsxs)("form",{onSubmit:t.saveListName,className:"flex-row "+("n"===n?" loader-input":""),children:[Object(r.jsx)("input",{className:"as-title h5 project-title",autoFocus:!0,value:t.projectName,disabled:"n"===n,onChange:function(e){return t.setProjectName(e.target.value)}}),Object(r.jsx)("button",{className:"btn-invisible material-icons",type:"submit",children:"save"}),Object(r.jsx)("button",{className:"btn-invisible material-icons",onClick:function(){return t.setEditListName(!1)},children:"close"})]}):Object(r.jsxs)("div",{className:"project-title-bar","data-tip":S.project.title._,children:[Object(r.jsx)("h5",{className:"project-title",onClick:function(){return t.setEditListName(!0)},children:t.projectName}),Object(r.jsxs)(Q,{sort:t.sort,setSort:t.setSort,children:[Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible w-100 left-align",onClick:function(){return function(e){return u.apply(this,arguments)}(!s)},children:[Object(r.jsx)("i",{className:"material-icons tiny left btn-pr",children:s?"check_box_outline_blank":"check_box"}),s?S.hideCompleted:S.showCompleted]})},"completed"),Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible w-100 left-align",onClick:function(){return function(){return l.apply(this,arguments)}()},children:[Object(r.jsx)("i",{className:"material-icons tiny left btn-pr",children:"person_add"}),S.project.share]})},"share"),Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible w-100 left-align",onClick:function(){return function(){return o.apply(this,arguments)}()},children:[Object(r.jsx)("i",{className:"material-icons tiny left btn-pr",children:"delete_forever"}),S.project.delete.tasks]})},"tasks"),Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible w-100 left-align",onClick:function(){return function(){return i.apply(this,arguments)}()},children:[Object(r.jsx)("i",{className:"material-icons tiny left btn-pr",children:"delete"}),S.project.delete._]})},"delete")]})]})})};n(159);var V=function(e){var t=e.children,n=e.modalOpen,a=e.okButton,c=e.cancelButton,s=e.onAccept,i=e.onCancel,o=e.loading;return Object(r.jsx)(r.Fragment,{children:n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"z-depth-5 modal",children:Object(r.jsxs)("div",{className:o?" loader-input cover":"",children:[Object(r.jsx)("div",{className:"modal-content",children:t}),Object(r.jsxs)("div",{className:"modal-footer",children:[a&&Object(r.jsx)("button",{onClick:s,className:"modal-close waves-effect waves-green btn-flat btn",dangerouslySetInnerHTML:{__html:a}}),c&&Object(r.jsx)("button",{onClick:i,className:"modal-close waves-effect waves-red btn-flat btn left",dangerouslySetInnerHTML:{__html:c}})]})]})}),Object(r.jsx)("div",{className:"backdrop dark",onClick:i})]}):""})};var X=function(e){var t=e.trigger,n=e.task,c=e.modalOpen,s=e.setModalOpen,i=Object(a.useState)(!1),l=Object(o.a)(i,2),u=l[0],d=l[1],h=Object(a.useState)(!1),m=Object(o.a)(h,2),f=m[0],O=m[1],x=Object(a.useState)(""),g=Object(o.a)(x,2),v=g[0],k=g[1],w=Object(a.useState)(n.subtasks||[]),N=Object(o.a)(w,2),y=N[0],C=N[1],_=Object(a.useState)(n.name||""),T=Object(o.a)(_,2),P=T[0],E=T[1],I=Object(a.useState)(n.description||""),F=Object(o.a)(I,2),U=F[0],L=F[1],D=Object(a.useState)(n.priority||0),A=Object(o.a)(D,2),z=A[0],M=A[1],B=Object(a.useContext)(fe);function q(e){return H.apply(this,arguments)}function H(){return(H=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!0),e.next=4,W.updateTask(Object(b.a)(Object(b.a)({},n),{},{name:P,priority:z,description:U}));case 4:d(!1),s(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.checked=!t.checked,e.next=3,W.toggleTask(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(!0),e.next=4,W.addTask(J({name:v,parentId:n.id,level:n.level+1,projectId:B.id}));case 4:O(!1),k("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){E(n.name||""),C(n.subtasks||[]),L(n.description||""),M(n.priority||0)}),[n]),Object(r.jsxs)(r.Fragment,{children:[t&&Object(r.jsx)("button",{className:t.className,onClick:function(){return s(!0)},children:t.text}),Object(r.jsxs)(V,{modalOpen:c,loading:u,onAccept:q,onCancel:function(){return s(!1)},okButton:'<i class="material-icons right">save</i>',cancelButton:'<i class="material-icons right">close</i>',children:[Object(r.jsxs)("form",{onSubmit:q,children:[Object(r.jsx)("div",{children:Object(r.jsx)("input",{value:P,required:!0,minLength:3,placeholder:S.task.name,onChange:function(e){return E(e.target.value)}})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{value:U,className:"materialize-textarea",placeholder:S.task.notes,onChange:function(e){return L(e.target.value)}})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:S.task.prio._}),Object(r.jsxs)("div",{className:"flex-row",children:[Object(r.jsx)("button",{className:"btn-invisible priority prio-0 "+(0===z&&"active"),onClick:function(){return M(0)},type:"button",children:Object(r.jsx)("i",{className:"material-icons",children:"flag"})}),Object(r.jsx)("button",{className:"btn-invisible priority prio-1 "+(1===z&&"active"),onClick:function(){return M(1)},type:"button",children:Object(r.jsx)("i",{className:"material-icons",children:"flag"})}),Object(r.jsx)("button",{className:"btn-invisible priority prio-2 "+(2===z&&"active"),onClick:function(){return M(2)},type:"button",children:Object(r.jsx)("i",{className:"material-icons",children:"flag"})}),Object(r.jsx)("button",{className:"btn-invisible priority prio-3 "+(3===z&&"active"),onClick:function(){return M(3)},type:"button",children:Object(r.jsx)("i",{className:"material-icons",children:"flag"})})]})]})]}),Object(r.jsxs)("ul",{className:"list-unstyled flex-column",children:[Object(r.jsx)("li",{className:f?" loader-input":"",children:Object(r.jsxs)("form",{onSubmit:function(e){return G.apply(this,arguments)},className:"flex-row",children:[Object(r.jsx)("input",{onChange:function(e){return k(e.target.value)},placeholder:S.task.subtasks,value:v,className:"input-field",required:!0,minLength:3}),v?Object(r.jsx)("button",{className:"material-icons btn-invisible right",children:"save"}):""]})},"new-subtask"),(y||[]).map((function(e){return Object(r.jsxs)("li",{"data-tip":e.timestamp,className:"block",children:[Object(r.jsxs)("label",{className:"left",children:[Object(r.jsx)("input",{type:"checkbox",checked:e.checked,id:e.id,className:"material-cb",onChange:function(){return function(e){return Y.apply(this,arguments)}(e)}}),Object(r.jsx)("div",{})]}),Object(r.jsx)("span",{className:"left",children:e.name})]},e.id)}))]})]})]})};var $=function e(t){var n=t.task,c=t.level,s=Object(a.useState)(n.subtasks||[]),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(!1),h=Object(o.a)(d,2),m=h[0],f=h[1],O=Object(a.useState)(n.expanded||!1),x=Object(o.a)(O,2),g=x[0],v=x[1],k=Object(a.useContext)(fe),w=l.filter((function(e){return!e.checked})).length||0,N=n.checked?k.showCompleted?"done":"hidden":"",y=(k.showCompleted?l.length:w)?"":" v-hidden";function C(){return(C=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.checked=!t.checked,t.checked&&(t.expanded=!1),e.next=4,W.toggleTask(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(S.task.delete.all)){e.next=3;break}return e.next=3,W.deleteTask(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){u(n.subtasks||[])}),[n.subtasks]),Object(r.jsxs)("li",{className:N+" task",children:[Object(r.jsx)(M,{}),Object(r.jsxs)("div",{className:"task__content parent-hover","data-tip":n.timestamp,children:[Object(r.jsx)("button",{className:"toggle-expand subtle btn-invisible material-icons tiny left btn-pr"+(g?" expanded":"")+y,onClick:function(){return function(e){return _.apply(this,arguments)}(!g)},children:"chevron_right"}),Object(r.jsxs)("label",{className:"left prio-"+n.priority,children:[Object(r.jsx)("input",{type:"checkbox",className:"material-cb",checked:n.checked,onChange:function(){return function(e){return C.apply(this,arguments)}(n)}}),Object(r.jsx)("div",{})]}),Object(r.jsxs)("button",{className:"left-align btn-invisible "+(n.checked,""),onClick:function(){return f(!0)},children:[Object(r.jsx)("span",{className:"task-name",children:n.name}),l.length>0?Object(r.jsxs)("small",{className:"subtle child-hover ml-5 ib","data-tip":S.subtaskStatus,children:["(",w," / ",l.length-w,")"]}):"",n.description&&Object(r.jsx)("small",{className:"subtle ml-5",children:n.description})]}),Object(r.jsxs)("span",{className:"ml-auto flex-row",children:[Object(r.jsx)("button",{className:"child-hover material-icons btn-invisible task__action-button","data-tip":S.task.delete._,onClick:function(){return function(){return T.apply(this,arguments)}(n)},children:"delete"}),Object(r.jsx)("button",{className:"child-hover material-icons btn-invisible task__action-button","data-tip":S.task.edit,onClick:function(){return f(!0)},children:"edit"}),Object(r.jsx)(X,{task:Object(b.a)({},n),modalOpen:m,setModalOpen:f})]})]}),g&&Object(r.jsx)(r.Fragment,{children:n.level<E.maxDepth&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("ul",{className:"subtasks","aria-details":c,children:l.map((function(t){return Object(r.jsx)(e,{task:t,level:c+1},t.id)}))})})})]})};var ee=function(e){var t=e.setProject,n=Object(a.useContext)(fe),c=Object(a.useState)(n.sort),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(a.useState)(""),d=Object(o.a)(u,2),h=d[0],m=d[1],f=Object(a.useState)([]),O=Object(o.a)(f,2),x=O[0],g=O[1],v=Object(a.useState)("yes"),k=Object(o.a)(v,2),w=k[0],N=k[1],y=Object(a.useState)(n.showCompleted),C=Object(o.a)(y,2),_=C[0],T=C[1],P=Object(a.useState)(n.name||S.noListName),E=Object(o.a)(P,2),I=E[0],F=E[1],U=Object(a.useState)(!1),L=Object(o.a)(U,2),D=L[0],A=L[1],z=x.filter((function(e){return!e.checked})),M=x.filter((function(e){return!!e.checked})),B=Object(a.useMemo)((function(){return S.allTasksCompleted()}),[z.length]),q=Object(a.useMemo)((function(){return S.task.addTaskPh()}),[n.id]);function H(){return(H=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N("t"),e.next=4,W.addTask(J({name:h,projectId:n.id}));case 4:N(""),m("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N("n"),e.next=4,G({name:I});case 4:A(!1),N("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.updateProject(Object(b.a)(Object(b.a)({},n),t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){F(n.name),T(n.showCompleted),N("p");var e=W.getTasksForProject(n.id,i,(function(e){g(e),N(""),n.id&&i!==n.sort&&K.updateProject(Object(b.a)(Object(b.a)({},n),{},{sort:i}))}));return function(){e&&e()}}),[n.id,i]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"p"===w?"loader-input cover":"",children:[Object(r.jsx)(Z,{projectFunctions:{setProject:t,projectName:I,setProjectName:F,saveListName:function(e){return Y.apply(this,arguments)},editListName:D,setEditListName:A,showCompleted:_,setShowCompleted:T,sort:i,setSort:l},isLoading:w}),Object(r.jsxs)("ul",{children:[z.length?z.map((function(e){return Object(r.jsx)($,{task:e,level:0},e.id)})):M.length?Object(r.jsx)("li",{children:Object(r.jsx)("h5",{className:"subtle max-content ml-50",children:B})}):"",_&&M.map((function(e){return Object(r.jsx)($,{task:e},e.id)})),Object(r.jsx)("li",{className:"task",children:Object(r.jsxs)("form",{onSubmit:function(e){return H.apply(this,arguments)},className:"flex-row task__content form-inline"+("t"===w?" loader-input":""),children:[Object(r.jsx)("i",{className:"material-icons left v-hidden btn-p",children:"add"}),Object(r.jsx)("button",{className:"btn-invisible p0",children:Object(r.jsx)("i",{className:"material-icons left subtle btn-pr",children:h?"save":"add"})}),Object(r.jsx)("div",{className:"form-group w-100",children:Object(r.jsx)("div",{className:"input-group mb-2",children:Object(r.jsx)("input",{onChange:function(e){m(e.target.value)},className:"invisible f-100 btn-pl",placeholder:q,required:!0,value:h,disabled:"t"===w,autoComplete:"off"})})})]})})]})]})})},te=(n(160),[n.p+"static/media/balloon.e798b449.svg",n.p+"static/media/board.52700170.svg",n.p+"static/media/book.9af88ef0.svg",n.p+"static/media/calendar.667dab87.svg",n.p+"static/media/music.154532f7.svg",n.p+"static/media/puzzle.c7f9f331.svg",n.p+"static/media/science.4185b725.svg"]);var ne=function(e){var t=e.setShowSidebar,n=Object(a.useMemo)((function(){return N(te)}),[]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"no-project",children:[Object(r.jsx)("h5",{className:"center-align",children:S.project.inspire}),Object(r.jsx)("img",{alt:"inspiration",src:n,className:"no-task-img"}),Object(r.jsx)("button",{className:"btn-flat btn-border left-align flex-center-self subtle",onClick:function(){return t(!0)},children:S.project.noSelected})]})})};n(161);var re=function(e){var t=e.project,n=e.onDelete;function c(e,t){return s.apply(this,arguments)}function s(){return(s=Object(p.a)(j.a.mark((function e(t,r){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="delete"===e.t0?3:"share"===e.t0?6:15;break;case 3:return e.next=5,n(r);case 5:return e.abrupt("break",16);case 6:return a=prompt("User Email to join?"),e.next=9,K.getUserByEmail(a);case 9:if(c=e.sent){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,K.addUserToProject(r,c.username);case 14:case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var i=Object(a.useState)(!1),l=Object(o.a)(i,2),u=l[0],d=l[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{className:"btn-invisible child-hover ch-hidden ml-auto",onClick:function(){return d(!0)},children:Object(r.jsx)("i",{className:"tiny material-icons subtle",children:"more_horiz"})}),u&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("ul",{className:"dropdown dd-left",onClick:function(){return d(!1)},children:[Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible left left-align w-100 p-10",onClick:function(){return c("delete",t)},children:[Object(r.jsx)("i",{className:"tiny material-icons subtle",children:"delete"})," ",S.project.delete._]})}),Object(r.jsx)("li",{className:"dropdown-item",children:Object(r.jsxs)("button",{className:"btn-invisible left left-align w-100 p-10",onClick:function(){return c("share",t)},children:[Object(r.jsx)("i",{className:"tiny material-icons subtle",children:"person_add"})," ",S.project.share]})})]}),Object(r.jsx)("div",{className:"backdrop",onClick:function(){return d(!1)}})]})]})},ae=n(117),ce=n.n(ae);var se=function(e){var t=e.onChangeComplete,n=e.color,c=e.icon,s=Object(a.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1];return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("span",{className:"relative",children:[Object(r.jsx)("button",{className:"btn-invisible h-100",onClick:function(){return u(!0)},children:Object(r.jsx)("i",{className:"material-icons tiny left m0",style:{color:n},children:c})}),l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"color-picker",children:Object(r.jsx)(ce.a,{color:n,onChangeComplete:function(e){u(!1),t(e.hex)}})}),Object(r.jsx)("div",{className:"backdrop",onClick:function(){return u(!1)}})]}):""]})})};var ie,oe=function(e){return{name:e,color:E.defaultProjectColor,sort:E.defaultSort,showCompleted:!1}},le=(ie={},Object(T.a)(ie,P.inboxUrl,{url:P.inboxUrl,text:S.drawer.inbox,icon:"inbox",sort:"timestamp,desc"}),Object(T.a)(ie,P.priorityUrl,{url:P.priorityUrl,text:S.drawer.priority,icon:"flag",sort:"priority,desc"}),ie),ue=Object.values(le);var de=function(e){var t=e.projectId,n=e.changeToProject,c=Object(a.useContext)(fe),s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)([]),h=Object(o.a)(d,2),m=h[0],f=h[1],O=Object(a.useState)(""),x=Object(o.a)(O,2),g=x[0],v=x[1],k=Object(a.useRef)(!0);function w(e){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm(S.project.delete.long)){e.next=6;break}return u(t.id),e.next=4,K.deleteProject(t);case 4:n(""),u("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){e.id===c.id&&n({unselected:!0}),console.info("Changing project from",c.id,"to",e.id),n(e)}function C(){return(C=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.updateProject(Object(b.a)(Object(b.a)({},t),{},{color:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=K.getListOfProjects((function(e){var r=function(e,t){return t.find((function(t){return t.id===e}))||null}(c.id||t,e);k.current&&(r&&n(r),k.current=!1),f(e)}));return function(){e&&e()}}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("ul",{className:"projects-list flex-column",children:[ue.map((function(e){return Object(r.jsx)("li",{"data-tip":e.text.tooltip,className:"proj-li mb-5 parent-hover flex-row"+(t===e.url?" selected":""),children:Object(r.jsxs)("button",{className:"btn-invisible left left-align w-100",onClick:function(){return y({id:e.url})},children:[Object(r.jsx)("i",{className:"material-icons tiny left btn-pr",children:e.icon}),Object(r.jsx)("span",{className:"btn-pl",children:e.text._})]})},e.url)})),m.length?Object(r.jsxs)("li",{className:"proj-li bt-subtle",children:[Object(r.jsx)("i",{className:"material-icons inv",children:"inbox"}),Object(r.jsx)("span",{className:"btn-pl subtle",children:S.project.s})]},"title"):"",m.map((function(e){return Object(r.jsxs)("li",{className:"proj-li mb-5 parent-hover flex-row"+(c.id===e.id?" selected":"")+(l===e.id?" loader-input":""),children:[Object(r.jsx)(se,{color:e.color,onChangeComplete:function(t){return function(e,t){return C.apply(this,arguments)}(e,t)},icon:e.shared?"person":"lens"}),Object(r.jsx)("button",{className:"btn-invisible left left-align btn-p w-100",onClick:function(){return y(e)},children:e.name}),Object(r.jsx)(re,{project:e,onDelete:w})]},e.id)})),Object(r.jsx)("li",{className:"proj-li mb-5 parent-hover flex-row",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u("new"),K.newProject(oe(g)).then((function(e){v(""),u(""),n(e)}))},className:"add-project flex-row w-100 p0 "+("new"===l?" loader-input":""),children:[Object(r.jsx)("button",{className:"btn-invisible child-hover ch-hidden left",children:Object(r.jsx)("label",{htmlFor:"new-project-input",className:"pointer",children:Object(r.jsx)("i",{className:"tiny material-icons subtle",children:g?"save":"add"})})}),Object(r.jsx)("input",{className:"invisible left-align btn-pl",onChange:function(e){return v(e.target.value)},required:!0,minLength:"3",disabled:"new"===l,autoComplete:"off",value:g,id:"new-project-input",placeholder:S.project.add.ph})]})},"new-project")]})})};var je=function(e){return[P.inboxUrl,P.priorityUrl].indexOf(e)>=0},be={db:v(),headers:function(){return{authorization:localStorage.getItem("AuthToken")}},getDrawer:function(e,t,n){var r=t.split(","),a=Object(o.a)(r,2),c=a[0],s=a[1];try{var i,l=be.db.collectionGroup("tasks").where("_uids","array-contains",g().currentUser.uid);switch(e){case P.inboxUrl:i=l.where("checked","==",!1).orderBy(c,s);break;case P.priorityUrl:i=l.where("priority",">",0).orderBy("priority","desc");break;default:return I("error",S.invalidDrawer),n([]),function(){}}if(i)return i.onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data();t.push(Object(b.a)({id:e.id},n))})),n(t),console.info("Tasks in inbox: ",t.length)}))}catch(u){B("Error on fetching drawer: ",u)}}},pe=be,he=Q;var me=function(e){var t=e.drawerUrl,n=le[t],c=Object(a.useState)(!0),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(a.useState)([]),d=Object(o.a)(u,2),j=d[0],b=d[1],p=Object(a.useState)(n.sort),h=Object(o.a)(p,2),m=h[0],f=h[1],O=Object(a.useMemo)((function(){return S.allTasksCompleted()}),[]);return Object(a.useEffect)((function(){if(je(t)){var e=pe.getDrawer(t,m,(function(e){b(e),l(!1)}));return function(){e&&e()}}}),[t,m]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:i?"loader-input cover":"",children:[Object(r.jsxs)("div",{className:"project-title-bar",children:[Object(r.jsx)("h5",{className:"project-title","data-tip":n.text.tooltip,children:n.text._}),Object(r.jsx)(he,{sort:m,setSort:f})]}),Object(r.jsx)("ul",{children:j.length?j.map((function(e){return Object(r.jsx)($,{task:e,level:0},e.id)})):Object(r.jsx)("li",{children:Object(r.jsx)("h5",{className:"subtle ml-50",children:O})})})]})})},fe=c.a.createContext({}),Oe=c.a.createContext({});var xe=function(){var e=Object(u.g)(),t=Object(a.useRef)(Object(u.h)()),n=Object(a.useState)({empty:!0}),s=Object(o.a)(n,2),i=s[0],l=s[1],d=Object(a.useState)(!window.isSmallScreen),j=Object(o.a)(d,2),b=j[0],p=j[1],h=Object(a.useState)(Object(r.jsx)(r.Fragment,{})),m=Object(o.a)(h,2),f=m[0],O=m[1];function x(n){n.id!==i.id&&(t.current.projectId=n.id||"",l(n),e.push(P.project(n.id||"")))}return Object(a.useEffect)((function(){t.current.projectId?je(t.current.projectId)?O(Object(r.jsx)(me,{drawerUrl:t.current.projectId})):i.id?O(Object(r.jsx)(ee,{setProject:x})):O(Object(r.jsx)(r.Fragment,{})):O(Object(r.jsx)(ne,{setShowSidebar:p}))}),[i.id]),c.a.useContext(Ne)?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Oe.Provider,{value:x,children:Object(r.jsxs)(fe.Provider,{value:i,children:[Object(r.jsx)(G,{setShowSidebar:p,showSidebar:b}),Object(r.jsxs)("div",{id:"todo-app",className:b?"":" hidden-bar",children:[Object(r.jsxs)("div",{className:"projects-list-box",children:[b?Object(r.jsx)("div",{className:"backdrop dark only-mobile",onClick:function(){return p(!1)}}):"",Object(r.jsx)("div",{className:"projects-list-box-inner",children:Object(r.jsx)(de,{projectId:t.current.projectId,changeToProject:x})})]}),Object(r.jsx)("div",{className:"tasks-list-box flex-column",children:f})]})]})})}):(e.push(P.login),null)};n(290);var ge=function(){return Object(r.jsx)("span",{className:"app-loader",children:Object(r.jsx)("span",{className:"loader-img"})})};var ve=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("footer",{className:"page-footer grey",children:[Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"col l6 s12",children:[Object(r.jsx)("h5",{className:"white-text",children:"Footer Content"}),Object(r.jsx)("p",{className:"grey-text text-lighten-4",children:"You can use rows and columns here to organize your footer content."})]}),Object(r.jsxs)("div",{className:"col l4 offset-l2 s12",children:[Object(r.jsx)("h5",{className:"white-text",children:"Links"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 1"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 2"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 3"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{className:"grey-text text-lighten-3",href:"#!",children:"Link 4"})})]})]})]})}),Object(r.jsx)("div",{className:"footer-copyright",children:Object(r.jsxs)("div",{className:"container",children:["\xa9 2014 Copyright Text",Object(r.jsx)("a",{className:"grey-text text-lighten-4 right",href:"#!",children:"More Links"})]})})]})})};var ke=function(e){var t=e.loaded,n=Object(a.useContext)(Ne);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("nav",{className:"grey",children:Object(r.jsxs)("div",{className:"nav-wrapper container",children:[Object(r.jsx)(l.b,{to:P.app,className:"brand-logo",children:"Todo List"}),Object(r.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:n?t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(l.b,{to:P.app,children:S.gotoApp})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"#logout",onClick:F.logout,className:"btn-invisible",children:S.login.logout})})]}):t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(l.b,{to:P.login,children:S.login.login})}),Object(r.jsx)("li",{children:Object(r.jsx)(l.b,{to:P.signup,children:S.login.signup})})]})})]})})})};var we=function(e){var t=e.loaded;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ke,{loaded:t}),Object(r.jsx)("div",{style:{height:"300px",display:"block"},children:Object(r.jsx)("h4",{className:"flex-center-self center-align",children:"Welcome to the best todo-app"})}),Object(r.jsx)(ve,{})]})},Ne=c.a.createContext({});var ye=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),d=i[0],j=i[1];return F.authState((function(e){console.info("User is ".concat(e?"":"NOT ","logged in")),j(e),c(!0)})),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Ne.Provider,{value:d,children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:P.home,exact:!0,children:Object(r.jsx)(we,{loaded:n})}),n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(u.b,{path:P.signup,component:L}),Object(r.jsx)(u.b,{path:P.login,component:D}),Object(r.jsx)(u.b,{path:"".concat(P.project(":projectId?")),component:xe})]}):Object(r.jsx)(ge,{})]})})})})};i.a.render(Object(r.jsx)(ye,{}),document.getElementById("root"))}},[[291,1,2]]]);