{"version":3,"sources":["functions/screenSize.js","functions/clientOS.js","services/environment.js","services/firebase.js","functions/sha1.js","config/text.js","services/authService.js","config/urls.js","config/constants.js","login/LoginBox.js","login/Signup.js","login/Login.js","components/Dropdown/UserSettingsDropdown.js","components/Navbar/Navbar.js","services/handleError.js","functions/time.js","services/taskService.js","functions/createTaskObject.js","services/projectService.js","components/Project/ProjectOptions/ProjectOptions.js","components/Project/ProjectHeader/ProjectHeader.js","components/Project/ProjectHeader/index.js","components/Modal/Modal.js","components/Modal/TaskModal.js","components/Project/Task/Task.js","components/Project/Project.js","components/NoProject/NoProject.js","components/Project/ProjectList/ProjectListDropdown/ProjectListDropdown.js","components/Project/ProjectList/ProjectListDropdown/index.js","components/ColorPicker/ColorPicker.js","functions/createProjectObject.js","config/drawerConfig.js","components/Project/ProjectList/ProjectList.js","components/Project/ProjectList/index.js","functions/reservedKey.js","services/drawerService.js","components/Project/ProjectOptions/index.js","components/Drawer/Drawer.js","TodoApp.js","components/Loader/Loader.js","components/HomePage/Footer.js","components/HomePage/Header.js","components/HomePage/HomePage.js","App.js","index.js"],"names":["window","isSmallScreen","onresize","innerWidth","osName","Unknown","Android","iOS","Windows","MacOS","Linux","storage","environment","production","firebase","apiKey","databaseURL","projectId","authDomain","storageBucket","messagingSenderId","appId","measurementId","url","initializeApp","analytics","auth","db","firestore","sha1","str","a","buffer","TextEncoder","encode","crypto","subtle","digest","Array","from","Uint8Array","map","x","toString","padStart","join","debounceAuth","text","gotoApp","loading","noListName","Date","toISOString","slice","task","name","delete","addTaskPh","phs","Math","floor","random","length","subtasks","save","discard","notes","prio","_","low","high","urgent","drawer","inbox","tooltip","priority","invalidDrawer","sharedProject","subtaskStatus","allTasksCompleted","incomplete","completed","completedNo","showCompleted","hideCompleted","project","s","noSelected","share","tasks","long","add","ph","genericError","loggedInAs","login","signup","logout","noAccount","yesAccount","error","success","signupSuccess","invalidPass","invalidUser","urls","home","app","id","inboxUrl","priorityUrl","constants","defaultProjectColor","toast","position","maxDepth","defaultSort","sort","icon","drawerSort","authService","setToken","token","localStorage","setItem","authState","done","onIdTokenChanged","user","clearTimeout","setTimeout","getIdToken","then","signupData","password","sha1Password","axios","method","data","response","email","loginData","userCredential","signInWithEmailAndPassword","JSON","stringify","uid","currentUser","authToken","loginCatch","reason","console","code","cogoToast","message","e","preventDefault","signOut","validateSignup","username","confirm","LoginBox","children","title","className","Signup","history","useHistory","useState","getItem","isLoggedIn","setIsLoggedIn","setSignup","setLoading","signupError","setSignupError","_signupError","errors","Object","values","responseData","catch","React","useContext","LoggedInUserContext","push","to","onSubmit","value","onChange","target","placeholder","type","required","autoFocus","autoComplete","Login","setLogin","info","UserSettingsDropdown","dropdownShown","setDropdownShown","onClick","Navbar","setShowSidebar","showSidebar","handleError","errorText","lastError","indexOf","split","pop","removeItem","location","hash","time","timeStr","m","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","taskService","headers","authorization","updateTask","addTask","taskId","deleteTask","getTasksForProject","projectKey","sortField","sortDirection","collection","orderBy","onSnapshot","tasksDoc","forEach","taskDoc","parentId","timestamp","seconds","toggleTask","doc","update","checked","expanded","createTaskObject","level","description","projectService","getListOfProjects","where","projectsDoc","projects","projectData","shared","color","updateProject","result","newProject","deleteProject","deleteProjectTasks","getUserByEmail","userEmail","addUserToProject","ProjectOptions","setSort","sortDropdown","showSortDropdown","moreDropdown","showMoreDropdown","d","ProjectHeader","projectFunctions","isLoading","ProjectContext","psc","prompt","setShowCompleted","editListName","saveListName","projectName","disabled","setProjectName","setEditListName","toggleShowCompleted","deleteTasks","Modal","modalOpen","okButton","cancelButton","onAccept","onCancel","dangerouslySetInnerHTML","__html","TaskModal","trigger","setModalOpen","subtaskName","setSubtaskName","setSubtasks","taskName","setTaskName","taskDesc","setTaskDesc","setPriority","saveTask","subtask","useEffect","minLength","sub","toggleSubtask","Task","expandedTask","setExpandedTask","openLength","filter","doneClass","showExpanderClass","isExpanded","toggleExpanded","toggleCompleted","onDelete","aria-details","t","Project","projectTasks","setProjectTasks","setIsLoading","open","allCompleted","useMemo","projectPartial","unsubscribeTasks","NoProject","ProjectListDropdown","onAction","actionName","ColorPicker","onChangeComplete","showColorPicker","setShowColorPicker","style","colorChoice","hex","createProjectObject","drawerConfig","drawerArray","ProjectList","changeToProject","setProjects","newProjectName","setNewProjectName","onFirstLoad","setProject","_project","hexColor","unsubscribeProjects","_projects","find","p","validProject","proj","changeColor","snap","htmlFor","reservedKey","drawerService","getDrawer","drawerKey","query","taskCollection","collectionGroup","taskData","Drawer","drawerUrl","drawerTasks","setDrawerTasks","unsubscribeProject","createContext","TodoApp","useParams","projectKeyParam","empty","Provider","Loader","Footer","href","Header","loaded","HomePage","height","display","App","setLoaded","setUser","path","exact","component","root","document","getElementById","os","platform","navigator","unknown","isMobile","test","userAgent","guessClientOS","classList","ReactDOM","render"],"mappings":"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","file":"static/js/main.e1c79d82.chunk.js","sourcesContent":["const smallWindow = 800; // smaller than this, and it's considered small.\n\nwindow.isSmallScreen = false;\n\nwindow.onresize = function () {\n  window.isSmallScreen = (window.innerWidth < smallWindow);\n}\nwindow.onresize();\n\n","export const osName = {\n  Unknown: 'u',\n  Android: 'android',\n  iOS: 'ios',\n  Windows: 'win',\n  MacOS: 'mac',\n  Linux: 'linux',\n  storage: 'cs' // the name of the localstorage key.\n}\n\n\n/**\n * Function from StackOverflow to detect OS. Maybe not needed, but it's just to be fancy\n * {@url https://stackoverflow.com/a/38241481/2016686}\n */\nexport function guessClientOS () {\n  /**\n   * As detected by the browser.\n   */\n  const platform = window.navigator.platform;\n\n  /**\n   * These are the possible values\n   */\n  const macOsPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n\n  /**\n   * This is what we need to guess.\n   */\n  let os = osName.unknown;\n  let isMobile = false;\n\n  if (macOsPlatforms.indexOf(platform) !== -1) {\n    os = osName.MacOS;\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    os = osName.Windows;\n  } else if (/Linux/.test(platform)) {\n    os = osName.Linux;\n  } else {\n    // Otherwise, we try with phones...\n    const userAgent = window.navigator.userAgent;\n    const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n    if (/Android/.test(userAgent)) {\n      os = osName.Android;\n      isMobile = true;\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\n      os = osName.iOS;\n      isMobile = true;\n    }\n  }\n\n  return { isMobile, os };\n}\n","export const environment = {\n  production: true,\n\n  firebase: {\n    apiKey: 'AIzaSyDxmJzv3ccl0_ouKB9oVSzWIsn6uysYMLQ',\n    databaseURL: \"https://todo-list-react-33431.firebaseio.com\",\n    projectId: 'todo-list-react-33431',\n    authDomain: \"todo-list-react-33431.firebaseapp.com\",\n    storageBucket: \"todo-list-react-33431.appspot.com\",\n    messagingSenderId: \"153291173882\",\n    appId: \"1:153291173882:web:4eb5673b9a70ce5828fe43\",\n    measurementId: \"G-BCMCPMQHDB\"\n  },\n\n  url: 'https://us-central1-todo-list-react-33431.cloudfunctions.net/api',\n};\n\nif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n  // dev code\n  environment.production = false;\n  environment.url = 'http://localhost:5000/todo-list-react-33431/us-central1/api';\n  console.info('RUNNING ON DEVELOPMENT MODE', environment.url)\n} else {\n  // production code\n}\n\nexport default environment;\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/analytics';\nimport 'firebase/firestore';\nimport { environment } from './environment';\n\n\nfirebase.initializeApp(environment.firebase);\n\nexport const analytics = firebase.analytics;\nexport const auth = firebase.auth;\nexport const db = firebase.firestore;\n\n// if (environment.production) {\n//   analytics();\n// } else {\n//   // IS DEV\n//   db().useEmulator('localhost', 8080);\n//   auth().useEmulator('http://localhost:9099/');\n// }\n","export async function sha1( str ) {\n  const buffer = new TextEncoder('utf-8').encode( str );\n  const digest = await crypto.subtle.digest('SHA-1', buffer);\n\n  // Convert digest to hex string\n  return Array.from(new Uint8Array(digest)).map( x => x.toString(16).padStart(2,'0') ).join('');\n}\n","const dateToday = new Date().toISOString().slice(0, 10);\n\nexport const text = {\n  gotoApp: 'Open app',\n  loading: 'Loading app...',\n  noListName: 'New Project ' + dateToday,\n\n  task: {\n    name: 'Name of the task',\n    delete: 'Delete task and its subtasks? Can\\'t be undone',\n    addTaskPh: () => {\n      const phs = [\n        'e.g. Buy carrots',\n        'e.g. Clean apartment in the morning',\n        'e.g. Do some exercise',\n        'Add a new task ...',\n        'Create a task ...',\n        'e.g. Call family',\n        'e.g. Schedule interview'\n      ];\n      return phs[Math.floor(Math.random() * phs.length)];\n    },\n    subtasks: 'Subtasks',\n    save: 'Save',\n    discard: 'Cancel changes',\n    notes: 'Notes',\n    prio: {\n      _: 'Priority',\n      low: 'Low priority',\n      high: 'High priority',\n      urgent: 'Urgent'\n    }\n  },\n\n  drawer: {\n    inbox: {\n      _: 'Inbox',\n      tooltip: 'Your open tasks'\n    },\n    priority: {\n      _: 'Priority',\n      tooltip: 'High priority stuff'\n    },\n    invalidDrawer: 'Invalid URL (not an actual project)'\n  },\n  // addSubtaskBtn: 'Add a subtask',\n  // subtasks: 'Subtasks',\n  sharedProject: 'This project is shared',\n  subtaskStatus: '( Pending / Completed )',\n  // btn: 'Add task',\n  // title: 'MyTodo List',\n  // uncompleted: 'My tasks',\n  allTasksCompleted: () => {\n    const incomplete = [\n      'ðŸ˜ All tasks completed!',\n      'Now that\\'s what I call a clean list ðŸ¥³',\n      'Wow, such empty ðŸ‘',\n      'Finitto? Go for a cappuccino â˜•ï¸',\n      'All tasks done, time for a break ðŸ–',\n      'So productive. I\\'m impressed ðŸ˜Ž',\n      'Make a Todolist: Done âœ…',\n      'I am Finnish ðŸ‡«ðŸ‡® with all tasks.'\n    ];\n    return incomplete[Math.floor(Math.random() * incomplete.length)];\n  },\n  completed: 'Completed',\n  completedNo: 'No completed tasks',\n  showCompleted: 'Show completed tasks',\n  hideCompleted: 'Hide completed tasks',\n\n  project: {\n    s: 'Projects',\n    noSelected: 'Select a project or create a new one.',\n    share: 'Share Project',\n    delete: {\n      _: 'Delete Project',\n      tasks: 'Delete all tasks',\n      long: 'Delete this project and all the tasks? (cannot be undone)'\n    },\n    add: {\n      // _: 'Add a new project',\n      ph: 'Enter a name for a new project'\n    }\n  },\n\n  genericError: 'An error occurred. Please see console for details',\n\n  loggedInAs: (name) => `Logged in as ${ name }.`,\n\n  login: {\n    login: 'Log in',\n    signup: 'Sign up',\n    logout: 'Log out',\n    noAccount: 'Don\\'t have an account?',\n    yesAccount: 'Already a user?',\n    error: 'Invalid credentials',\n    success: 'Welcome Back!',\n    signupSuccess: 'Account created! Logging you in...',\n    invalidPass: 'Invalid login credentials',\n    invalidUser: 'No user exists for this email'\n  },\n\n};\n","import axios from 'axios';\nimport environment from './environment';\nimport cogoToast from 'cogo-toast';\nimport { auth } from './firebase';\nimport { sha1 } from 'functions/sha1';\nimport { text } from 'config/text';\nimport { constants } from 'config/constants';\n\nlet debounceAuth;\n\nexport const authService = {\n\n  setToken: (token) => {\n    localStorage.setItem('AuthToken', token);\n  },\n\n  authState: (done) => {\n    auth().onIdTokenChanged((user) => {\n      clearTimeout(debounceAuth);\n      debounceAuth = setTimeout(() => {\n        user && user.getIdToken(true).then((token) => {\n          authService.setToken(token);\n        });\n\n        done(user);\n      }, 300);\n    });\n  },\n\n  signup: (signupData) => {\n    return sha1(signupData.password)\n      .then((sha1Password) => {\n        return axios({\n          url: `${ environment.url }/signup`,\n          method: 'POST',\n          data: {\n            ...signupData,\n            password: sha1Password\n          }\n        });\n      })\n      .then((response) => {\n        return authService.login({\n          email: signupData.email,\n          password: signupData.password\n        });\n      });\n  },\n\n  login: (loginData) => {\n    let userCredential;\n\n    return sha1(loginData.password)\n      .then((sha1Password) => {\n        return auth().signInWithEmailAndPassword(loginData.email, sha1Password);\n      })\n      .then((response) => {\n        localStorage.setItem('uid', JSON.stringify(response.user.uid));\n        userCredential = response;\n        return auth().currentUser.getIdToken();\n      })\n      .then((authToken) => {\n        authService.setToken(authToken);\n        return userCredential;\n      });\n  },\n\n  loginCatch: (reason) => {\n    console.error(reason, reason.code, reason.code === 'auth/user-not-found');\n    if (reason.code === 'auth/wrong-password') {\n      cogoToast.error(text.login.invalidPass, constants.toast);\n    } else if (reason.code === 'auth/user-not-found') {\n      cogoToast.error(text.login.invalidUser, constants.toast);\n    } else {\n      cogoToast.error(reason.message, constants.toast);\n    }\n  },\n\n  logout: (e) => {\n    e.preventDefault();\n\n    auth().signOut().then(() => {\n      cogoToast.success('You\\'ve been signed out of the app', { position: 'bottom-center' });\n    });\n  },\n\n  validateSignup: (signupData) => {\n    if (!signupData.username) {\n      return { username: 'Must enter a valid username' };\n    }\n    if (!signupData.name || signupData.name.length <= 2) {\n      return { name: 'Must enter a longer name' };\n    }\n    if (!signupData.email || signupData.email.length <= 5) {\n      return { email: 'Invalid email' };\n    }\n    if (!signupData.password || !signupData.confirm) {\n      return { password: 'Password can\\'t be empty' };\n    }\n    if (signupData.password !== signupData.confirm) {\n      return { password: 'Passwords don\\'t match' };\n    }\n    return {};\n  }\n};\n","export const urls = {\n  home: '/',\n  app: '/app',\n  project: (id) => `${ urls.app }/${ id }`,\n  login: '/login',\n  signup: '/signup',\n\n  inboxUrl: 'inbox',\n  priorityUrl: 'priority',\n}\n","import { urls } from './urls';\n\nexport const constants = {\n  defaultProjectColor: '#aaa',\n  toast: { position: 'bottom-center' },\n  maxDepth: 3,\n  defaultSort: 'timestamp,desc',\n  sort: [\n    { icon: 'sort_by_alpha', name: 'A -> Z', sort: '_name_lower,asc' },\n    { icon: 'sort_by_alpha', name: 'Z -> A', sort: '_name_lower,desc' },\n    { icon: 'arrow_downward', name: 'Oldest First', sort: 'timestamp,asc' },\n    { icon: 'arrow_upward', name: 'Newest First', sort: 'timestamp,desc' },\n    { icon: 'flag', name: 'Priority', sort: 'priority,desc'}\n  ],\n  drawerSort: {\n    [urls.inboxUrl]: 'timestamp,desc',\n    [urls.priorityUrl]: 'priority,desc'\n  }\n};\n","import React from 'react';\nimport './_login-box.scss';\n\nfunction LoginBox ({ children, title, loading }) {\n  return (\n    <>\n      <div className={ 'flex-column vh-100 place-center' + ( loading ? ' loader-input cover' : '' ) }>\n        <div className=\"login-box\">\n          { title && <h5 className=\"mt-5\">{ title }</h5> }\n          { children }\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default LoginBox;\n","import React, { useState } from 'react';\nimport { authService } from 'services/authService';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { text } from 'config/text';\nimport { urls } from 'config/urls';\nimport { LoggedInUserContext } from '../App';\nimport cogoToast from 'cogo-toast';\nimport LoginBox from './LoginBox';\nimport { constants } from 'config/constants';\n\nfunction Signup () {\n\n  const history = useHistory();\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('user'));\n  const [signup, setSignup] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [signupError, setSignupError] = useState({});\n\n\n  async function onSubmit (e) {\n    e.preventDefault();\n\n    const _signupError = authService.validateSignup(signup);\n    const errors = Object.values(_signupError);\n    if (!errors.length) {\n      setLoading(true);\n      authService\n        .signup(signup)\n        .then((responseData) => {\n          setLoading(false);\n          if (responseData.user) {\n            cogoToast.success(text.login.signupSuccess, constants.toast);\n            setSignup({});\n            setIsLoggedIn(true);\n          }\n        })\n        .catch(({ response } ) => {\n          if (response.data && response.data.code) {\n            authService.loginCatch(response.data);\n          } else {\n            setSignupError(response.data);\n            const errors = Object.values(response.data);\n            errors.length && cogoToast.error(errors[0], constants.toast);\n          }\n          setLoading(false);\n        });\n    } else {\n      setSignupError(_signupError);\n      errors.length && cogoToast.error(errors[0], constants.toast);\n    }\n  }\n\n  // If the user is logged in already, redirect to the app!\n  if (React.useContext(LoggedInUserContext)) {\n    history.push(urls.app);\n    return null;\n  }\n\n  return (\n    <>\n      {\n        isLoggedIn\n          ? <Redirect to=\"/app\"/>\n          :\n          <>\n            <LoginBox title={ text.login.signup } loading={ loading }>\n              <form onSubmit={ onSubmit } className=\"flex-center-self\">\n                <input\n                  value={ signup.email || '' } onChange={ (e) => setSignup({\n                  ...signup,\n                  email: e.target.value\n                }) } placeholder=\"email\" type=\"email\" required autoFocus autoComplete=\"off\"\n                />\n                { signupError.email && <small>{ signupError.email }</small> }\n                <input\n                  value={ signup.name || '' } onChange={ (e) => setSignup({\n                  ...signup,\n                  name: e.target.value\n                }) } placeholder=\"name\" required autoComplete=\"off\"\n                />\n                { signupError.name && <small>{ signupError.name }</small> }\n                <input\n                  value={ signup.username || '' } onChange={ (e) => setSignup({\n                  ...signup,\n                  username: e.target.value\n                }) } placeholder=\"username\" required autoComplete=\"off\"\n                />\n                { signupError.username && <small>{ signupError.username }</small> }\n                <input\n                  value={ signup.password || '' } onChange={ (e) => setSignup({\n                  ...signup,\n                  password: e.target.value\n                }) } placeholder=\"password\" type=\"password\" required autoComplete=\"off\"\n                />\n                { signupError.password && <small>{ signupError.password }</small> }\n                <input\n                  value={ signup.confirm || '' } onChange={ (e) => setSignup({\n                  ...signup,\n                  confirm: e.target.value\n                }) } placeholder=\"confirm\" type=\"password\" required autoComplete=\"off\"\n                />\n                { signupError.password && <small>{ signupError.password }</small> }\n                <div className=\"flex-row\">\n                  <button type=\"submit\" className=\"btn btn-block\">{ text.login.signup }</button>\n                  <Link to={ urls.login } className=\"btn-flat\">{ text.login.yesAccount } { text.login.login }</Link>\n                </div>\n              </form>\n            </LoginBox>\n          </>\n      }\n    </>\n  );\n}\n\nexport default Signup;\n","import React, { useState } from 'react';\nimport { authService } from 'services/authService';\nimport { Redirect, Link, useHistory } from 'react-router-dom';\nimport { urls } from 'config/urls';\nimport { text } from 'config/text';\nimport { constants } from 'config/constants';\nimport { LoggedInUserContext } from 'App';\nimport cogoToast from 'cogo-toast';\nimport LoginBox from './LoginBox';\n\nfunction Login () {\n\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [login, setLogin] = useState({});\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('user'));\n\n  function onSubmit (e) {\n    e.preventDefault();\n\n    setLoading(true);\n\n    authService\n      .login(login)\n      .then((responseData /* Returns {user, error}! */) => {\n\n        setLoading(false);\n\n        if (responseData.user) {\n          // setLogin({});\n          setIsLoggedIn(true);\n          cogoToast.success(text.login.success, constants.toast);\n        } else {\n          if (responseData.error.code === 400) {\n            cogoToast.error(text.login.error, constants.toast);\n          }\n          console.info(responseData);\n        }\n      })\n      .catch((reason) => {\n        setLoading(false);\n        authService.loginCatch(reason);\n      });\n  }\n\n  if (React.useContext(LoggedInUserContext)) {\n    history.push(urls.app);\n    return null;\n  }\n\n  return (\n    <>\n      {\n        isLoggedIn\n          ? <Redirect to={ urls.app }/>\n          :\n          <>\n            <LoginBox title={ text.login.login } loading={ loading }>\n              <form onSubmit={ onSubmit } className=\"flex-center-self\">\n                <input\n                  value={ login.email || '' } onChange={ (e) => setLogin({\n                  ...login,\n                  email: e.target.value\n                }) } placeholder=\"email\" type=\"email\" autoFocus required\n                />\n                <input\n                  value={ login.password || '' } onChange={ (e) => setLogin({\n                  ...login,\n                  password: e.target.value\n                }) } placeholder=\"password\" type=\"password\" autoComplete=\"off\" required\n                />\n                <div className=\"flex-row\">\n                  <button type=\"submit\" className=\"btn btn-block\">{ text.login.login }</button>\n                  <Link\n                    to={ urls.signup } className=\"btn-flat right\"\n                  >{ text.login.noAccount } { text.login.signup }</Link>\n                </div>\n              </form>\n            </LoginBox>\n          </>\n      }\n    </>\n  );\n}\n\nexport default Login;\n","import React, { useState } from 'react';\nimport { text } from '../../config/text';\nimport { LoggedInUserContext } from '../../App';\nimport { authService } from '../../services/authService';\n\nfunction UserSettingsDropdown () {\n\n  const [dropdownShown, setDropdownShown] = useState(false);\n\n  const user = React.useContext(LoggedInUserContext);\n\n  return (\n    <>\n      <button className=\"btn-invisible\" onClick={ () => setDropdownShown(true) }>\n        <i className=\"material-icons\">settings</i>\n      </button>\n      {\n        dropdownShown &&\n        <>\n          <ul className=\"dropdown dd-left dd-big dd-high\" onClick={ () => setDropdownShown(false) }>\n            <li className=\"dropdown-item\">\n              <span className=\"left subtle btn-p\">{ text.loggedInAs(user.email) }</span>\n            </li>\n            <li className=\"dropdown-item\">\n              <button className=\"btn-invisible left left-align w-100\" onClick={ authService.logout }>\n                {/*<i className=\"material-icons subtle left\">exit_to_app</i>*/}\n                {/*<span className=\"left\">{ text.login.logout }</span>*/}\n                { text.login.logout }\n              </button>\n            </li>\n          </ul>\n          <div className=\"backdrop\" onClick={ () => setDropdownShown(false) }/>\n        </>\n      }\n    </>\n  );\n}\n\nexport default UserSettingsDropdown;\n","import React from 'react';\nimport UserSettingsDropdown from 'components/Dropdown/UserSettingsDropdown';\nimport './_navbar.scss';\n\nfunction Navbar ({ setShowSidebar, showSidebar }) {\n\n  return (\n    <>\n      <div className={ 'navbar-fixed todo-navbar ' + ( showSidebar ? 'open' : 'closed' ) }>\n        <nav className=\"navbar-hide\">\n          <div className=\"nav-wrapper\">\n            <a className=\"sidenav-btn btn-subtle\" onClick={ () => setShowSidebar(!showSidebar) }>\n              <i className=\"material-icons\">menu</i>\n            </a>\n            <ul className=\"right\">\n              <li>\n                <UserSettingsDropdown/>\n              </li>\n            </ul>\n            {/*<ul className=\"right hide-on-med-and-down\">*/ }\n            {/*  <li><a href=\"sass.html\">Sass</a></li>*/ }\n            {/*  <li><a href=\"badges.html\">Components</a></li>*/ }\n            {/*  <li><a href=\"collapsible.html\">Javascript</a></li>*/ }\n            {/*  <li><a href=\"mobile.html\">Mobile</a></li>*/ }\n            {/*</ul>*/ }\n          </div>\n        </nav>\n      </div>\n    </>\n  );\n}\n\nexport default Navbar;\n","import { urls } from 'config/urls';\nimport cogoToast from 'cogo-toast';\nimport { constants } from 'config/constants';\n\nexport const handleError = (errorText, error) => {\n  window.lastError = error;\n  cogoToast.error(errorText, constants.toast);\n\n  console.error(errorText, error);\n  if (['401', '403'].indexOf(error.toString().split(' ').pop()) >= 0) {\n    localStorage.removeItem('user');\n    localStorage.removeItem('AuthToken');\n    window.location.hash = urls.login;\n  }\n}\n","export function time (timeStr) {\n  const m = new Date(timeStr);\n  return m.getUTCFullYear() + '/' + (m.getUTCMonth() + 1) + '/' + m.getUTCDate()\n    + ' ' + m.getUTCHours() + ':' + m.getUTCMinutes() + ':' + m.getUTCSeconds();\n}\n","import { db } from './firebase';\nimport axios from 'axios';\nimport environment from './environment';\nimport { handleError } from './handleError';\nimport cogoToast from 'cogo-toast';\nimport { time } from 'functions/time';\nimport { constants } from 'config/constants';\n\nconst taskService = {\n\n  db: db(),\n\n  headers: () => {\n    return { authorization: localStorage.getItem('AuthToken') };\n  },\n\n  updateTask: async (task) => {\n    console.info('Updating task ', task.name);\n\n    delete task.subtasks; // we don't send this to the server!!\n\n    try {\n      return await axios({\n        url: environment.url + `/project/${ task.projectId }/task/${ task.id }`,\n        method: 'PUT',\n        data: task,\n        headers: taskService.headers()\n      }).then((response) => {\n        console.info('result from PUT', response);\n        cogoToast.success(response.data.message, constants.toast);\n      });\n    } catch (e) {\n      handleError('Error on update task: ' + e.response.data.message, e);\n    }\n  },\n\n  addTask: async (task) => {\n    console.info('Adding task ', task.name);\n\n    try {\n      return await axios({\n        url: environment.url + `/project/${ task.projectId }/task`,\n        method: 'POST',\n        data: task,\n        headers: taskService.headers()\n      }).then((response) => {\n        console.info('result from POST', response);\n        cogoToast.success(response.data.message, constants.toast);\n        return response.data.taskId;\n      });\n    } catch (e) {\n      handleError('Error on save task: ' + e.response.data.message, e);\n    }\n  },\n\n  deleteTask: async (task) => {\n    try {\n      return await axios({\n        url: environment.url + `/project/${ task.projectId }/task/${ task.id }`,\n        method: 'DELETE',\n        headers: taskService.headers()\n      }).then((response) => {\n        console.info('result from DELETE', response);\n        cogoToast.success(response.data.message, constants.toast);\n      });\n    } catch (e) {\n      handleError('Error on delete task: ' + e.response.data.message, e);\n    }\n  },\n\n  getTasksForProject: (projectKey, sort, done) => {\n    const [sortField, sortDirection] = sort.split(',');\n    try {\n      return taskService.db\n        .collection(`/projects/${ projectKey }/tasks`)\n        .orderBy('level', 'desc')\n        .orderBy(sortField, sortDirection)\n        .onSnapshot((tasksDoc) => {\n          const tasks = {};\n          tasksDoc.forEach((taskDoc) => {\n            const id = taskDoc.id;\n            const task = taskDoc.data();\n            const parentId = task.parentId || 'root_task';\n\n            tasks[parentId] = tasks[parentId] || [];\n            tasks[parentId].push({\n              id,\n              ...task,\n              projectId: projectKey,\n              timestamp: time(task.timestamp.seconds * 1000),\n              subtasks: tasks[id] || []\n            });\n            delete tasks[id];\n          });\n          done(tasks['root_task'] || []);\n        });\n    } catch (e) {\n      handleError('Error on fetching tasks: ', e);\n    }\n  },\n\n  toggleTask: (task) => {\n    try {\n      return taskService.db\n        .doc(`/projects/${ task.projectId }/tasks/${ task.id }`)\n        .update({\n          checked: task.checked,\n          expanded: task.expanded\n        });\n    } catch (e) {\n      handleError('Error on updating \"checked\" task: ', e);\n    }\n  }\n\n};\n\nexport default taskService;\n","import cogoToast from 'cogo-toast';\nimport { constants } from '../config/constants';\n\nfunction createTaskObject (task) {\n  if (!task.projectId) {\n    cogoToast.error('No project id!', constants.toast);\n    console.error(task);\n  }\n\n  return {\n    name: task.name || '',\n    checked: task.checked || false,\n    id: task.id || null, // set it to null or a valid value. Else it will fail\n    timestamp: task.timestamp || new Date(),\n    level: task.level || 0,\n    parentId: task.parentId || null,\n    description: task.description || '',\n    projectId: task.projectId,\n    priority: task.priority || 0\n  }\n}\n\nexport default createTaskObject;\n","import { auth, db } from './firebase';\nimport axios from 'axios';\nimport environment from './environment';\nimport { handleError } from './handleError';\nimport cogoToast from 'cogo-toast';\nimport { constants } from '../config/constants';\n\nconst projectService = {\n\n  db: db(),\n\n  headers: () => {\n    return { authorization: localStorage.getItem('AuthToken') };\n  },\n\n  getListOfProjects: (done) => {\n    try {\n      return projectService.db\n        .collection(`/projects`)\n        .where('_uids', 'array-contains', auth().currentUser.uid)\n        // .orderBy('timestamp', 'desc')\n        .onSnapshot((projectsDoc) => {\n\n          const projects = [];\n          projectsDoc.forEach((doc) => {\n            const projectData = doc.data();\n            projects.push({\n              id: doc.id,\n              name: projectData.name,\n              shared: projectData.shared,\n              sort: projectData.sort,\n              showCompleted: projectData.showCompleted,\n              color: projectData.color\n            });\n          });\n\n          // done([...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects, ...projects]);\n          done(projects);\n\n          console.info('Lists loaded: ', projects.length);\n        });\n    } catch (e) {\n      handleError('Error on fetching tasks: ', e);\n    }\n  },\n\n  updateProject: async (project) => {\n    // console.info('Updating project ', project);\n\n    try {\n      return await axios({\n        url: environment.url + `/project/${ project.id }`,\n        method: 'PUT',\n        data: project,\n        headers: projectService.headers()\n      }).then((result) => {\n        // cogoToast.success(result.data.message, constants.toast);\n        // console.info('result from Edit Project PUT', result);\n      });\n    } catch (e) {\n      handleError('Error on save project name: ', e);\n    }\n  },\n\n  newProject: async (project) => {\n    try {\n      return await axios({\n        url: environment.url + `/project`,\n        method: 'POST',\n        data: project,\n        headers: projectService.headers()\n      }).then((result) => {\n        cogoToast.success(result.data.message, constants.toast);\n        return result.data.project;\n      });\n    } catch (e) {\n      handleError('Error on create project: ', e);\n    }\n  },\n\n  deleteProject: async (project) => {\n    try {\n      return await axios({\n        url: environment.url + `/project/${ project.id }`,\n        method: 'DELETE',\n        headers: projectService.headers()\n      }).then((result) => {\n        cogoToast.success(result.data.message, constants.toast);\n        console.info('result from project DELETE', result);\n      });\n    } catch (e) {\n      handleError('Error on delete project: ', e);\n    }\n  },\n\n  deleteProjectTasks: async (project) => {\n    try {\n      return await axios({\n        url: environment.url + `/project/${ project.id }/only-tasks`,\n        method: 'DELETE',\n        headers: projectService.headers()\n      }).then((result) => {\n        cogoToast.success(result.data.message, constants.toast);\n        console.info('result from project task DELETE', result);\n      });\n    } catch (e) {\n      handleError('Error on delete project tasks: ', e);\n    }\n  },\n\n  getUserByEmail: async (userEmail) => {\n    try {\n      return await axios({\n        url: environment.url + `/user/search/`,\n        method: 'POST',\n        data: { email: userEmail },\n        headers: projectService.headers(),\n      }).then((result) => {\n        return result.data.user;\n      });\n    } catch (e) {\n      handleError('Error on searching email: ', e);\n    }\n  },\n\n  addUserToProject: async (project, username) => {\n    try {\n      return await axios({\n        url: environment.url + `/project/${ project.id }/join`,\n        method: 'POST',\n        headers: projectService.headers(),\n        data: { username: username }\n      }).then((result) => {\n        cogoToast.success(result.data.message, constants.toast);\n        console.info('result from joining Project', result);\n      });\n    } catch (e) {\n      handleError('Error on joining project: ', e);\n    }\n  }\n};\n\nexport default projectService;\n","import React, { useState } from 'react';\nimport './_project-options.scss';\nimport { constants } from '../../../config/constants';\n\n\nfunction ProjectOptions ({ sort, setSort, children }) {\n\n  const [sortDropdown, showSortDropdown] = useState(false);\n  const [moreDropdown, showMoreDropdown] = useState(false);\n\n  return (\n    <>\n      <div className=\"buttons\">\n        <>\n          { sort && // Only if the `sort` is passed from the parent.\n          <button className=\"btn-invisible\" onClick={ () => showSortDropdown(true) }>\n            <i className=\"material-icons\">swap_vert</i>\n          </button>\n          }\n          {\n            sortDropdown &&\n            <>\n              <ul className=\"dropdown dd-left dd-20 dd-high\">\n                {\n                  constants.sort.map((d) =>\n                    <li key={ d.sort } className={ 'dropdown-item' }>\n                      <button className=\"btn-invisible\" onClick={ () => setSort(d.sort) }>\n                        { d.icon && <i className=\"material-icons tiny left btn-p\">{ d.icon }</i> }\n                        <span className={ (d.sort === sort ? ' bold' : '') }>{ d.name }</span>\n                      </button>\n                    </li>\n                  )\n                }\n              </ul>\n              <div className=\"backdrop\" onClick={ () => showSortDropdown(false) }/>\n            </>\n          }\n          {\n            children && // Only if the `more` is passed from the parent.\n            <button className=\"btn-invisible\" onClick={ () => showMoreDropdown(true) }>\n              <i className=\"material-icons\">more_horiz</i></button>\n          }\n          {\n            moreDropdown &&\n            <>\n              <ul className=\"dropdown dd-left dd-20 dd-high\">\n                { children }\n              </ul>\n              <div className=\"backdrop\" onClick={ () => showMoreDropdown(false) }/>\n            </>\n          }\n        </>\n      </div>\n    </>\n  );\n}\n\nexport default ProjectOptions;\n","import React, { useContext } from 'react';\nimport { text } from 'config/text';\nimport { ProjectContext } from 'TodoApp';\nimport ProjectOptions from 'components/Project/ProjectOptions/ProjectOptions';\nimport projectService from 'services/projectService';\nimport cogoToast from 'cogo-toast';\n\nfunction ProjectHeader ({ projectFunctions, isLoading }) {\n\n  const project = useContext(ProjectContext);\n  const psc = projectFunctions.showCompleted;\n\n  async function deleteProject () {\n    if (window.confirm(text.project.delete._)) {\n      await projectService.deleteProject(project);\n    }\n  }\n\n  async function deleteTasks () {\n    if (window.confirm(text.project.delete.tasks)) {\n      await projectService.deleteProjectTasks(project);\n    }\n  }\n\n  async function share () {\n    const userEmail = prompt('User Email to join?');\n    const user = await projectService.getUserByEmail(userEmail);\n    if (!user) {\n      cogoToast.error(text.genericError);\n      console.error('error: ', user);\n      return;\n    }\n    await projectService.addUserToProject(project, user.username);\n  }\n\n  async function toggleShowCompleted (showCompleted) {\n    projectFunctions.setShowCompleted(showCompleted);\n    await projectService.updateProject({\n      ...project,\n      showCompleted\n    });\n  }\n\n  return (\n    projectFunctions.editListName\n      ? <form onSubmit={ projectFunctions.saveListName } className={ 'flex-row ' + (isLoading === 'n' ? ' loader-input' : '') }>\n        <input\n          className=\"as-title h5 project-title\" autoFocus /*onBlur={ project.saveListName }*/\n          value={ projectFunctions.projectName }\n          disabled={ isLoading === 'n' }\n          onChange={ (e) => projectFunctions.setProjectName(e.target.value) }\n        />\n        <button className=\"btn-invisible material-icons\" type='submit'>save</button>\n        <button className=\"btn-invisible material-icons\" onClick={ () => projectFunctions.setEditListName(false) }>close</button>\n      </form>\n      : <div className=\"project-title-bar\">\n        <h5\n          className=\"project-title\" onClick={ () => projectFunctions.setEditListName(true) }\n        >{ projectFunctions.projectName }</h5>\n        <ProjectOptions sort={ projectFunctions.sort } setSort={ projectFunctions.setSort }>\n          <li className=\"dropdown-item\" key=\"completed\">\n            <button className=\"btn-invisible w-100 left-align\" onClick={ () => toggleShowCompleted(!psc) }>\n              <i className=\"material-icons tiny left btn-pr\">{ psc ? 'check_box_outline_blank' : 'check_box' }</i>\n              { psc ? text.hideCompleted : text.showCompleted }\n            </button>\n          </li>\n          <li className=\"dropdown-item\" key=\"share\">\n            <button className=\"btn-invisible w-100 left-align\" onClick={ () => share() }>\n              <i className=\"material-icons tiny left btn-pr\">person_add</i>\n              { text.project.share }\n            </button>\n          </li>\n          <li className=\"dropdown-item\" key=\"tasks\">\n            <button className=\"btn-invisible w-100 left-align\" onClick={ () => deleteTasks() }>\n              <i className=\"material-icons tiny left btn-pr\">delete_forever</i>\n              { text.project.delete.tasks }\n            </button>\n          </li>\n          <li className=\"dropdown-item\" key=\"delete\">\n            <button className=\"btn-invisible w-100 left-align\" onClick={ () => deleteProject() }>\n              <i className=\"material-icons tiny left btn-pr\">delete</i>\n              { text.project.delete._ }\n            </button>\n          </li>\n        </ProjectOptions>\n      </div>\n  );\n}\n\nexport default ProjectHeader;\n","import ProjectHeader from './ProjectHeader';\n\nexport default ProjectHeader;\n","import React from 'react';\n\nfunction Modal ({ children, modalOpen, okButton, cancelButton, onAccept, onCancel, loading }) {\n\n  return (\n    <>\n      {\n        modalOpen ? <>\n            <div className={ 'z-depth-5 modal' }>\n              <div className={ (loading ? ' loader-input cover' : '') }>\n                <div className=\"modal-content\">\n                  { children }\n                </div>\n                <div className=\"modal-footer\">\n                  {\n                    okButton &&\n                    <button\n                      onClick={ onAccept }\n                      className=\"modal-close waves-effect waves-green btn-flat btn\"\n                      dangerouslySetInnerHTML={ { __html: okButton } }\n                    />\n                  }\n                  {\n                    cancelButton &&\n                    <button\n                      onClick={ onCancel }\n                      className=\"modal-close waves-effect waves-red btn-flat btn left\"\n                      dangerouslySetInnerHTML={ { __html: cancelButton } }\n                    />\n                  }\n                </div>\n              </div>\n            </div>\n            <div className=\"backdrop dark\" onClick={ onCancel }/>\n          </>\n          : ''\n      }\n    </>\n  );\n}\n\nexport default Modal;\n","import Modal from './Modal';\nimport React, { useContext, useEffect, useState } from 'react';\nimport createTaskObject from 'functions/createTaskObject';\nimport { text } from 'config/text';\nimport taskService from 'services/taskService';\nimport { ProjectContext } from 'TodoApp';\n\n\nfunction TaskModal ({ trigger, task, modalOpen, setModalOpen }) {\n\n  const [loading, setLoading] = useState(false);\n  const [subtaskName, setSubtaskName] = useState('');\n  const [subtasks, setSubtasks] = useState(task.subtasks || []);\n  const [taskName, setTaskName] = useState(task.name || '');\n  const [taskDesc, setTaskDesc] = useState(task.description || '');\n  const [priority, setPriority] = useState(task.priority || 0);\n\n  const project = useContext(ProjectContext);\n\n  useEffect(() => {\n    setTaskName(task.name || '');\n    setSubtasks(task.subtasks || []);\n    setTaskDesc(task.description || '');\n    setPriority(task.priority || 0);\n  }, [task]);\n\n  async function saveTask (e) {\n    e.preventDefault();\n\n    setLoading(true);\n\n    await taskService.updateTask({\n      ...task,\n      name: taskName,\n      priority: priority,\n      description: taskDesc\n    });\n\n    setLoading(false);\n\n    setModalOpen(false);\n  }\n\n  async function toggleSubtask (subtask) {\n    subtask.checked = !subtask.checked;\n    await taskService.toggleTask(subtask);\n  }\n\n  async function saveSubtask (e) {\n    e.preventDefault();\n\n    await taskService.addTask(createTaskObject({\n      name: subtaskName,\n      parentId: task.id,\n      level: task.level + 1,\n      projectId: project.id\n    }));\n\n    e.target[0].value = '';\n  }\n\n  return (\n    <>\n      <button className={ trigger.className } onClick={ () => setModalOpen(true) }>{ trigger.text }</button>\n      <Modal\n        modalOpen={ modalOpen }\n        loading={ loading }\n        onAccept={ saveTask }\n        onCancel={ () => setModalOpen(false) }\n        okButton={ '<i class=\"material-icons right\">save</i>' }\n        cancelButton={ '<i class=\"material-icons right\">close</i>' }\n      >\n        {/*<h6 className=\"subtle mb-15 mt-5\">{ project.name }</h6>*/ }\n        <form onSubmit={ saveTask }>\n          <div>\n            {/*<label>{ text.task.name }</label>*/ }\n            <input\n              value={ taskName } required minLength={ 3 }\n              placeholder={ text.task.name }\n              onChange={ (e) => setTaskName(e.target.value) }\n            />\n          </div>\n          <div>\n            {/*<label>{ text.task.notes }</label>*/ }\n            <input\n              value={ taskDesc }\n              className=\"materialize-textarea\"\n              placeholder={ text.task.notes }\n              onChange={ (e) => setTaskDesc(e.target.value) }\n            />\n          </div>\n          <div>\n            <label>{ text.task.prio._ }</label>\n            <div className=\"flex-row\">\n              <button\n                className={ 'btn-invisible priority prio-0 ' + (priority === 0 && 'active') }\n                onClick={ () => setPriority(0) } type=\"button\">\n                <i className=\"material-icons\">flag</i></button>\n              <button\n                className={ 'btn-invisible priority prio-1 ' + (priority === 1 && 'active') }\n                onClick={ () => setPriority(1) } type=\"button\">\n                <i className=\"material-icons\">flag</i></button>\n              <button\n                className={ 'btn-invisible priority prio-2 ' + (priority === 2 && 'active') }\n                onClick={ () => setPriority(2) } type=\"button\">\n                <i className=\"material-icons\">flag</i></button>\n              <button\n                className={ 'btn-invisible priority prio-3 ' + (priority === 3 && 'active') }\n                onClick={ () => setPriority(3) } type=\"button\">\n                <i className=\"material-icons\">flag</i></button>\n            </div>\n          </div>\n        </form>\n\n        <ul className=\"list-unstyled flex-column\">\n          <li key=\"new-subtask\">\n            <form onSubmit={ saveSubtask }>\n              <input\n                onChange={ (e) => setSubtaskName(e.target.value) }\n                placeholder={ text.task.subtasks }\n                className=\"input-field\"\n                required minLength={ 3 }\n              />\n            </form>\n          </li>\n          {\n            (subtasks || []).map((sub) =>\n              <li key={ sub.id } title={ sub.timestamp } className=\"block\">\n                <label className=\"left\">\n                  <input\n                    type=\"checkbox\" checked={ sub.checked }\n                    id={ sub.id }\n                    className=\"material-cb\"\n                    onChange={ () => toggleSubtask(sub) }\n                  />\n                  <div/>\n                </label>\n                <span className=\"left\">{ sub.name }</span>\n              </li>\n            )\n          }\n        </ul>\n      </Modal>\n    </>\n  );\n}\n\nexport default TaskModal;\n","import React, { useContext, useEffect, useState } from 'react';\nimport './_task.scss';\nimport TaskModal from 'components/Modal/TaskModal';\nimport { text } from 'config/text';\nimport taskService from 'services/taskService';\nimport { ProjectContext } from 'TodoApp';\nimport { constants } from 'config/constants';\n\nfunction Task ({ task, level }) {\n\n  const [subtasks, setSubtasks] = useState(task.subtasks || []);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [expandedTask, setExpandedTask] = useState(task.expanded || false);\n\n  const project = useContext(ProjectContext);\n\n  const openLength = subtasks.filter((s) => !s.checked).length || 0;\n\n  const doneClass = (task.checked ? (project.showCompleted ? 'done' : 'hidden') : '');\n\n  const showExpanderClass = ((project.showCompleted ? subtasks.length : openLength) ? '' : ' v-hidden')\n\n  useEffect(() => {\n    setSubtasks(task.subtasks || []);\n  }, [task.subtasks]);\n\n  async function toggleCompleted (task) {\n    task.checked = !task.checked;\n    // after changing the state...\n    if (task.checked) {\n      // set all subtasks as checked, since the main task was marked as checked.\n      // (task.subtasks || []).forEach((_task) => _task.checked = true);\n      task.expanded = false;\n    }\n    await taskService.toggleTask(task);\n    // await taskService.updateTask(project.id, task);\n  }\n\n  /**\n   * If you want to say the toggle state, just update this function\n   */\n  async function toggleExpanded (isExpanded) {\n    // task.expanded = isExpanded;\n    // await taskService.updateTask(task);\n    setExpandedTask(isExpanded);\n  }\n\n  async function onDelete () {\n    if (window.confirm(text.task.delete)) {\n\n      await taskService.deleteTask(task);\n    }\n  }\n\n  return (\n    <li className={ doneClass + ' bt-subtle task' } title={ task.timestamp }>\n      <div className=\"task-content parent-hover\">\n        <button\n          className={ 'toggle-expand subtle btn-invisible material-icons tiny left btn-pr' + (expandedTask ? ' expanded' : '') + showExpanderClass }\n          onClick={ () => toggleExpanded(!expandedTask) }\n        >chevron_right\n        </button>\n\n        <label className={ 'left prio-' + task.priority }>\n          <input\n            type=\"checkbox\"\n            className=\"material-cb\"\n            checked={ task.checked }\n            onChange={ () => toggleCompleted(task) }\n          />\n          <div/>\n        </label>\n        <button\n          className={ 'btn-invisible ' + (task.checked ? '' : '') }\n          onClick={ () => setModalOpen(true) }\n        >\n          <span className=\"task-name\">{ task.name }</span>\n          { subtasks.length > 0 && <small\n            className=\"subtle child-hover ml-5\" title={ text.subtaskStatus }\n          >({ openLength } / { subtasks.length - openLength })</small> }\n          { task.description && <small className=\"subtle ml-5\">{ task.description }</small> }\n        </button>\n\n        <span className=\"right\">\n          <button\n            className=\"child-hover btn-invisible ml-5 material-icons right subtle\"\n            onClick={ () => onDelete(task) }\n          >delete\n          </button>\n          <TaskModal\n            trigger={ {\n              className: 'child-hover btn-invisible ml-5 material-icons right subtle',\n              text: 'edit'\n            } } task={ { ...task } }\n            modalOpen={ modalOpen }\n            setModalOpen={ setModalOpen }\n          />\n        </span>\n      </div>\n      {\n        expandedTask &&\n        <>\n          {\n            (task.level < constants.maxDepth) && <>\n              <ul className=\"subtasks\" aria-details={ level }>\n                {\n                  subtasks.map((t) =>\n                    <Task\n                      key={ t.id }\n                      task={ t }\n                      level={ level + 1 }\n                    />\n                  )\n                }\n              </ul>\n            </>\n          }\n        </>\n      }\n    </li>\n  );\n}\n\nexport default Task;\n","import React, { useContext, useEffect, useMemo, useState } from 'react';\nimport './_project.scss';\nimport taskService from 'services/taskService';\nimport createTaskObject from 'functions/createTaskObject';\nimport { text } from 'config/text';\nimport projectService from 'services/projectService';\nimport { ProjectContext } from '../../TodoApp';\nimport ProjectHeader from './ProjectHeader';\nimport Task from './Task/Task';\n\nfunction Project () {\n\n  const project = useContext(ProjectContext);\n\n  const [sort, setSort] = useState(project.sort);\n  const [taskName, setTaskName] = useState('');\n  const [projectTasks, setProjectTasks] = useState([]);\n  const [isLoading, setIsLoading] = useState('yes');\n  const [showCompleted, setShowCompleted] = useState(project.showCompleted);\n  const [projectName, setProjectName] = useState(project.name || text.noListName);\n  const [editListName, setEditListName] = useState(false);\n\n  const open = projectTasks.filter((task) => !task.checked);\n  const completed = projectTasks.filter((task) => !!task.checked);\n\n  // const inputElement = useRef(null);\n\n  const allCompleted = useMemo(() => {\n    return text.allTasksCompleted();\n  }, [open.length]);\n\n  const addTaskPh = useMemo(() => {\n    return text.task.addTaskPh();\n  }, [project.id]);\n\n  useEffect(() => {\n    setProjectName(project.name);\n    setShowCompleted(project.showCompleted);\n    setIsLoading('p');\n\n    // const unsubscribeProject = projectService.getProject(project.id, setProject);\n    const unsubscribeTasks = taskService.getTasksForProject(project.id, sort, (tasks) => {\n      setProjectTasks(tasks);\n      setIsLoading('');\n\n      if (project.id && sort !== project.sort) {\n        projectService.updateProject({ ...project, sort });\n      }\n    });\n\n    return () => {\n      // unsubscribeProject && unsubscribeProject();\n      unsubscribeTasks && unsubscribeTasks();\n    };\n  }, [project.id, sort]);\n\n  async function addTask (e) {\n    e.preventDefault();\n    setIsLoading('t');\n\n    await taskService.addTask(createTaskObject({\n      name: taskName,\n      projectId: project.id\n    }));\n    setIsLoading('');\n    setTaskName('');\n  }\n\n  function taskNameChange (e) {\n    setTaskName(e.target.value);\n  }\n\n  async function saveListName (e) {\n    e.preventDefault();\n\n    setIsLoading('n');\n    await update({ name: projectName });\n    setEditListName(false);\n    setIsLoading('');\n  }\n\n  async function update (projectPartial) {\n    return await projectService.updateProject({ ...project, ...projectPartial });\n  }\n\n  return (\n    <>\n      <div className={ isLoading === 'p' ? 'loader-input cover' : '' }>\n        <ProjectHeader projectFunctions={ {\n          projectName, setProjectName,\n          saveListName,\n          editListName, setEditListName,\n          showCompleted, setShowCompleted,\n          sort, setSort\n        } } isLoading={ isLoading }\n        />\n\n        <ul>\n          { open.length ?\n            open.map((task) =>\n              <Task\n                key={ task.id }\n                task={ task }\n                level={ 0 }\n              />)\n            : (completed.length ? <li><h5 className=\"subtle max-content ml-50\">{ allCompleted }</h5></li> : '')\n          }\n          { showCompleted && completed.map((task) =>\n            <Task\n              key={ task.id }\n              task={ task }\n            />) }\n\n          <li className=\"task\">\n            <form\n              onSubmit={ addTask }\n              className={ 'flex-row task-content form-inline' + (isLoading === 't' ? ' loader-input' : '') }\n            >\n              {/*className={ 'flex-row task-content form-inline' + (isLoading === 't' ? ' loader-input' : '') }>*/ }\n              <i /* Just to give the right padding */ className=\"material-icons left v-hidden btn-p\">add</i>\n              <button className=\"btn-invisible p0\">\n                <i className=\"material-icons left subtle btn-pr\">{ taskName ? 'save' : 'add' }</i>\n              </button>\n              <div className=\"form-group w-100\">\n                <div className=\"input-group mb-2\">\n                  <input\n                    onChange={ taskNameChange } className=\"invisible f-100 btn-pl\"\n                    placeholder={ addTaskPh } required\n                    value={ taskName }\n                    disabled={ isLoading === 't' }\n                    autoComplete=\"off\" /*ref={ inputElement }*/\n                  />\n                </div>\n              </div>\n            </form>\n          </li>\n        </ul>\n      </div>\n    </>\n  );\n}\n\nexport default Project;\n","import { text } from 'config/text';\n\nfunction NoProject ({ setShowSidebar }) {\n  return (\n    <>\n      <div className=\"h-100 place-center\">\n        <button className=\"btn-invisible left-align flex-center-self\" onClick={ () => setShowSidebar(true) }>{ text.project.noSelected }</button>\n      </div>\n    </>\n  )\n}\n\nexport default NoProject;\n","import React, { useState } from 'react';\nimport { text } from 'config/text';\nimport projectService from 'services/projectService';\nimport cogoToast from 'cogo-toast';\n\nfunction ProjectListDropdown ({ project, onDelete }) {\n\n  /**\n   * @deprecated PLEASE REMOVE\n   * @param actionName\n   * @param project\n   * @returns {Promise<void>}\n   */\n  async function onAction (actionName, project) {\n    switch (actionName) {\n      case 'delete':\n        await onDelete(project);\n        break;\n      case 'share':\n        const userEmail = prompt('User Email to join?');\n        const user = await projectService.getUserByEmail(userEmail);\n        if (!user) {\n          cogoToast.error(text.genericError);\n          console.error('error: ', user);\n          return;\n        }\n        await projectService.addUserToProject(project, user.username);\n        break;\n      default:\n        break;\n    }\n  }\n\n  const [dropdownShown, setDropdownShown] = useState(false);\n\n  return (\n    <>\n      <button className=\"btn-invisible child-hover ch-hidden ml-auto\" onClick={ () => setDropdownShown(true) }>\n        <i className=\"tiny material-icons subtle\">more_horiz</i>\n      </button>\n      {\n        dropdownShown &&\n        <>\n          <ul className=\"dropdown dd-left\" onClick={ () => setDropdownShown(false) }>\n            <li className=\"dropdown-item\">\n              <button className=\"btn-invisible left left-align w-100 p-10\" onClick={ () => onAction('delete', project) }>\n                <i className=\"tiny material-icons subtle\">delete</i> {text.project.delete._}\n              </button>\n            </li>\n            <li className=\"dropdown-item\">\n              <button className=\"btn-invisible left left-align w-100 p-10\" onClick={ () => onAction('share', project) }>\n                <i className=\"tiny material-icons subtle\">person_add</i> {text.project.share}\n              </button>\n            </li>\n          </ul>\n          <div className=\"backdrop\" onClick={ () => setDropdownShown(false) }/>\n        </>\n      }\n    </>\n  );\n}\n\nexport default ProjectListDropdown;\n","import ProjectListDropdown from './ProjectListDropdown';\nexport default ProjectListDropdown;\n","import { TwitterPicker } from 'react-color';\nimport React, { useState } from 'react';\n\nfunction ColorPicker ({ onChangeComplete, color, icon }) {\n\n  const [showColorPicker, setShowColorPicker] = useState(false);\n\n  function setColor (colorChoice) {\n    setShowColorPicker(false);\n    onChangeComplete(colorChoice.hex);\n  }\n\n  return (\n    <>\n      <span className=\"relative\">\n        <button className=\"btn-invisible h-100\" onClick={ () => setShowColorPicker(true) }>\n          <i className=\"material-icons tiny left m0\" style={ { color: color } }>{ icon }</i>\n        </button>\n        { showColorPicker ?\n          <>\n            <div className=\"color-picker\">\n              <TwitterPicker\n                color={ color }\n                onChangeComplete={ setColor }\n              />\n            </div>\n            <div className=\"backdrop\" onClick={ () => setShowColorPicker(false) }/>\n          </>\n          : ''\n        }\n              </span>\n    </>\n  );\n}\n\nexport default ColorPicker;\n","import { constants } from 'config/constants';\n\nfunction createProjectObject (name) {\n  return{\n    name: name,\n    color: constants.defaultProjectColor,\n    sort: constants.defaultSort,\n    showCompleted: false\n  }\n}\n\nexport default createProjectObject;\n","import { urls } from './urls';\nimport { text } from './text';\n\nexport const drawerConfig = {\n  [urls.inboxUrl]: {\n    url: urls.inboxUrl,\n    text: text.drawer.inbox,\n    icon: 'inbox',\n    sort: 'timestamp,desc'\n  },\n  [urls.priorityUrl]: {\n    url: urls.priorityUrl,\n    text: text.drawer.priority,\n    icon: 'flag',\n    sort: 'priority,desc'\n  }\n};\n\nexport const drawerArray = Object.values(drawerConfig);\n","import React, { useContext, useEffect, useState } from 'react';\n\nimport './_project-list.scss';\nimport { text } from 'config/text';\nimport projectService from 'services/projectService';\nimport ProjectListDropdown from './ProjectListDropdown';\nimport ColorPicker from 'components/ColorPicker/ColorPicker';\nimport createProjectObject from 'functions/createProjectObject';\nimport { drawerArray } from 'config/drawerConfig';\nimport { ProjectContext } from 'TodoApp';\n\nfunction validProject (projectId, projects) {\n  const proj = projects.find((p) => p.id === projectId);\n  // If there's a project set in the URL and it's valid (it exists)\n  return proj || null; // otherwise don't set any project.\n}\n\nfunction ProjectList ({ projectId, changeToProject }) {\n\n  const project = useContext(ProjectContext);\n\n  const [isLoading, setIsLoading] = useState('');\n  const [projects, setProjects] = useState([]);\n\n  const [newProjectName, setNewProjectName] = useState('');\n\n  let onFirstLoad = true;\n\n  useEffect(() => {\n    const unsubscribeProjects = projectService.getListOfProjects((_projects) => {\n      const _project = validProject(project.id || projectId, _projects);\n      if (onFirstLoad) {\n        // We ONLY set project on the first load! never again\n        _project && changeToProject(_project);\n        onFirstLoad = false;\n      }\n      setProjects(_projects);\n    });\n\n    return () => {\n      unsubscribeProjects && unsubscribeProjects();\n    };\n  }, []);\n\n  function addNewProject (e) {\n    e.preventDefault();\n\n    setIsLoading('new');\n\n    projectService\n      .newProject(createProjectObject(newProjectName))\n      .then((snap) => {\n        setNewProjectName('');\n        setIsLoading('');\n        changeToProject(snap.id);\n      });\n  }\n\n  async function deleteProject (project) {\n    if (window.confirm(text.project.delete.long)) {\n      setIsLoading(project.id);\n      await projectService.deleteProject(project);\n      changeToProject('');\n      setIsLoading('');\n    }\n  }\n\n  function setProject (_project) {\n    if (_project.id === project.id) {\n      return; // can't change to itself... it also causes a re-render problem in the `useEffect`\n    }\n    console.info('Changing project from', project.id, 'to', _project.id);\n    changeToProject(_project);\n  }\n\n  async function changeColor (project, hexColor) {\n    return await projectService.updateProject({\n      ...project,\n      color: hexColor\n    });\n  }\n\n\n  return (\n    <>\n      <ul className=\"projects-list flex-column\">\n        {\n          drawerArray.map((p) => <li\n            key={ p.url }\n            title={ p.text.tooltip }\n            className={ 'proj-li mb-5 parent-hover flex-row' + (projectId === p.url ? ' selected' : '') }\n          >\n            <button className=\"btn-invisible left left-align\" onClick={ () => setProject({ id: p.url }) }>\n              <i className=\"material-icons tiny left btn-pr\">{ p.icon }</i>\n              <span className=\"btn-pl\">{ p.text._ }</span>\n            </button>\n          </li>)\n        }\n        { projects.length ?\n          <li key=\"title\" className=\"proj-li mb-5 bt-subtle\">\n            <i className=\"material-icons inv\">inbox</i>\n            <span className=\"btn-pl subtle\">{ text.project.s }</span>\n          </li> : '' }\n        {\n          projects.map((proj) =>\n            <li\n              key={ proj.id }\n              className={ 'proj-li mb-5 parent-hover flex-row' + (project.id === proj.id ? ' selected' : '') + (isLoading === proj.id ? ' loader-input' : '') }\n            >\n              <ColorPicker\n                color={ proj.color } onChangeComplete={ (e) => changeColor(proj, e) }\n                icon={ proj.shared ? 'person' : 'lens' }\n              />\n              <button className=\"btn-invisible left left-align btn-p\" onClick={ () => setProject(proj) }>\n                { proj.name }\n                {/*( { proj.openTasks } <span className=\"subtle\">/ { proj.completedTasks }</span> )*/ }\n              </button>\n              <ProjectListDropdown project={ proj } onDelete={ deleteProject }/>\n            </li>\n          )\n        }\n        <li key=\"new-project\" className=\"proj-li mb-5 parent-hover flex-row\">\n          <form\n            onSubmit={ addNewProject }\n            className={ 'add-project flex-row w-100 p0 ' + (isLoading === 'new' ? ' loader-input' : '') }\n          >\n            <button className=\"btn-invisible child-hover ch-hidden left\">\n              <label htmlFor=\"new-project-input\" className=\"pointer\">\n                <i className=\"tiny material-icons subtle\">{ newProjectName ? 'save' : 'add' }</i>\n              </label>\n            </button>\n            <input\n              className=\"invisible left-align btn-pl\"\n              onChange={ (e) => setNewProjectName(e.target.value) }\n              required minLength=\"3\"\n              disabled={ isLoading === 'new' }\n              autoComplete=\"off\"\n              value={ newProjectName }\n              id=\"new-project-input\"\n              placeholder={ text.project.add.ph }\n            />\n          </form>\n\n        </li>\n      </ul>\n    </>\n  );\n}\n\n\nexport default ProjectList;\n","import ProjectList from './ProjectList';\nexport default ProjectList;\n","import { urls } from 'config/urls';\n\nfunction reservedKey (projectKey) {\n  return [urls.inboxUrl, urls.priorityUrl].indexOf(projectKey) >= 0;\n}\n\nexport default reservedKey;\n","import { auth, db } from './firebase';\nimport { handleError } from './handleError';\nimport cogoToast from 'cogo-toast';\nimport { urls } from '../config/urls';\nimport { text } from '../config/text';\n\nconst drawerService = {\n\n  db: db(),\n\n  headers: () => {\n    return { authorization: localStorage.getItem('AuthToken') };\n  },\n\n  getDrawer: (drawerKey, sort, done) => {\n    const [sortField, sortDirection] = sort.split(',');\n    try {\n      const taskCollection = drawerService.db\n        .collectionGroup('tasks')\n        .where('_uids', 'array-contains', auth().currentUser.uid);\n      let query;\n      switch (drawerKey) {\n        case urls.inboxUrl:\n          query = taskCollection\n            .where('checked', '==', false)\n            .orderBy(sortField, sortDirection);\n          break;\n        case urls.priorityUrl:\n          query = taskCollection\n            .where('priority', '>', 0)\n            .orderBy('priority', 'desc');\n          break;\n        default:\n          cogoToast.error(text.invalidDrawer);\n          done([]);\n          return () => {};\n      }\n      //\n      if (query) {\n\n        return query.onSnapshot((tasksDoc) => {\n\n          const tasks = [];\n          tasksDoc.forEach((doc) => {\n            const taskData = doc.data();\n\n            tasks.push({\n              id: doc.id,\n              ...taskData\n            });\n          });\n\n          done(tasks);\n\n          console.info('Tasks in inbox: ', tasks.length);\n        });\n      }\n    } catch (e) {\n      handleError('Error on fetching drawer: ', e);\n    }\n  },\n};\n\nexport default drawerService;\n","import ProjectOptions from './ProjectOptions';\nexport default ProjectOptions;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport reservedKey from 'functions/reservedKey';\nimport drawerService from 'services/drawerService';\nimport Task from 'components/Project/Task/Task';\nimport { text } from 'config/text';\nimport ProjectOptions from 'components/Project/ProjectOptions';\nimport { drawerConfig } from '../../config/drawerConfig';\n\nfunction Drawer ({ drawerUrl }) {\n\n  const drawer = drawerConfig[drawerUrl];\n\n  const [loading, setLoading] = useState(true);\n  const [drawerTasks, setDrawerTasks] = useState([]);\n  const [sort, setSort] = useState(drawer.sort)\n\n  const allCompleted = useMemo(() => {\n    return text.allTasksCompleted();\n  }, []);\n\n  useEffect(() => {\n    if (reservedKey(drawerUrl)) {\n      // Special project, like an inbox...\n      const unsubscribeProject = drawerService.getDrawer(drawerUrl, sort, (tasks) => {\n        setDrawerTasks(tasks);\n        setLoading(false);\n      });\n\n      return () => {\n        unsubscribeProject && unsubscribeProject();\n      };\n\n    }\n  }, [drawerUrl, sort]);\n\n  return (\n    <>\n      <div className={ loading ? 'loader-input cover' : '' }>\n        <div className=\"project-title-bar\">\n          <h5 className=\"project-title\" title={ drawer.text.tooltip }>{ drawer.text._ }</h5>\n          <ProjectOptions sort={ sort } setSort={ setSort }/>\n        </div>\n        <ul>\n          {\n            drawerTasks.length\n              ? drawerTasks.map((t) => <Task key={ t.id } task={ t } level={ 0 }/>)\n              : <li><h5 className=\"subtle max-content ml-50\">{ allCompleted }</h5></li>\n          }\n        </ul>\n      </div>\n\n    </>\n  );\n}\n\nexport default Drawer;\n","import React, { useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\n\nimport { urls } from 'config/urls';\nimport { LoggedInUserContext } from 'App';\n\nimport Navbar from 'components/Navbar/Navbar';\nimport Project from 'components/Project/Project';\nimport NoProject from 'components/NoProject/NoProject';\nimport ProjectList from 'components/Project/ProjectList';\nimport Drawer from './components/Drawer/Drawer';\nimport reservedKey from './functions/reservedKey';\n\nexport const ProjectContext = React.createContext({});\n\nfunction TodoApp () {\n  const history = useHistory();\n  const { projectKeyParam: projectId } = useParams();\n\n  const [project, setProject] = useState({empty: true});\n  const [showSidebar, setShowSidebar] = useState(!window.isSmallScreen);\n\n  function changeToProject (_project) {\n    if (_project.id !== project.id) {\n      setProject(_project);\n      history.push(urls.project(_project.id || ''));\n    }\n  }\n\n  if (!React.useContext(LoggedInUserContext)) {\n    history.push(urls.login);\n    return null;\n  }\n\n  return (\n    <>\n      <Navbar setShowSidebar={ setShowSidebar } showSidebar={ showSidebar }/>\n      <div id=\"todo-app\" className={ (showSidebar ? '' : ' hidden-bar') }>\n        <ProjectContext.Provider value={ project }>\n          <div className={ 'projects-list-box' }>\n            { showSidebar ? <div className=\"backdrop only-mobile\" onClick={ () => setShowSidebar(false) }/> : '' }\n            <div className={ 'projects-list-box-inner' }>\n              <ProjectList\n                projectId={ projectId }\n                changeToProject={ changeToProject }\n              />\n            </div>\n          </div>\n          <div className=\"tasks-list-box flex-column\">\n            {\n              project.id\n                ? (\n                  reservedKey(project.id)\n                    ? <Drawer drawerUrl={ project.id }/>\n                    : <Project/>\n                )\n                : <NoProject setShowSidebar={ setShowSidebar }/>\n            }\n          </div>\n        </ProjectContext.Provider>\n      </div>\n    </>\n  );\n}\n\nexport default TodoApp;\n","import 'assets/loader.svg';\nimport './_app-loader.scss';\n\nimport React from 'react';\n\nfunction Loader () {\n\n  return (\n    <span className=\"app-loader\">\n      <span className=\"loader-img\"/>\n    </span>\n  )\n}\n\nexport default Loader;\n","function Footer () {\n  return (\n    <>\n      <footer className=\"page-footer grey\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col l6 s12\">\n              <h5 className=\"white-text\">Footer Content</h5>\n              <p\n                className=\"grey-text text-lighten-4\"\n              >You can use rows and columns here to organize your footer content.</p>\n            </div>\n            <div className=\"col l4 offset-l2 s12\">\n              <h5 className=\"white-text\">Links</h5>\n              <ul>\n                <li><a className=\"grey-text text-lighten-3\" href=\"#!\">Link 1</a></li>\n                <li><a className=\"grey-text text-lighten-3\" href=\"#!\">Link 2</a></li>\n                <li><a className=\"grey-text text-lighten-3\" href=\"#!\">Link 3</a></li>\n                <li><a className=\"grey-text text-lighten-3\" href=\"#!\">Link 4</a></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <div className=\"footer-copyright\">\n          <div className=\"container\">\n            Â© 2014 Copyright Text\n            <a className=\"grey-text text-lighten-4 right\" href=\"#!\">More Links</a>\n          </div>\n        </div>\n      </footer>\n    </>\n  );\n}\n\nexport default Footer;\n","import React, { useContext } from 'react';\nimport { LoggedInUserContext } from 'App';\nimport { text } from 'config/text';\nimport { urls } from 'config/urls';\nimport { Link } from 'react-router-dom';\nimport { authService } from 'services/authService';\n\nfunction Header ({ loaded }) {\n  const user = useContext(LoggedInUserContext);\n\n  return (\n    <>\n      <nav className=\"grey\">\n        <div className=\"nav-wrapper container\">\n          <Link to={ urls.app } className=\"brand-logo\">Todo List</Link>\n          <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\n            {\n              user\n                ? loaded && <>\n                <li><Link to={ urls.app }>{ text.gotoApp }</Link></li>\n                <li><a\n                  href=\"#logout\" onClick={ authService.logout }\n                  className=\"btn-invisible\"\n                >{ text.login.logout }</a>\n                </li>\n              </>\n                : loaded && <>\n                <li><Link to={ urls.login }>{ text.login.login }</Link></li>\n                <li><Link to={ urls.signup }>{ text.login.signup }</Link></li>\n              </>\n            }\n          </ul>\n        </div>\n      </nav>\n    </>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport Footer from './Footer';\nimport Header from './Header';\n\n\nfunction HomePage ({ loaded }) {\n\n\n  return (\n    <>\n      <Header loaded={ loaded }/>\n      <div\n        style={ {\n          height: '300px',\n          display: 'block'\n        } }\n      >\n        <h4 className=\"flex-center-self center-align\">Welcome to the best todo-app</h4>\n      </div>\n      <Footer/>\n    </>\n  );\n}\n\nexport default HomePage;\n","import React, { useState } from 'react';\nimport { Route, Switch, HashRouter as Router } from 'react-router-dom';\nimport Signup from './login/Signup';\nimport Login from './login/Login';\nimport TodoApp from './TodoApp';\nimport { authService } from './services/authService';\nimport Loader from './components/Loader/Loader';\nimport HomePage from './components/HomePage/HomePage';\nimport { urls } from 'config/urls';\n\nexport const LoggedInUserContext = React.createContext({});\n\nfunction App () {\n\n  const [loaded, setLoaded] = useState(false);\n  const [user, setUser] = useState(false);\n\n  authService.authState((user) => {\n    console.info('User logged in: ', !!user);\n    setUser(user);\n    setLoaded(true);\n  });\n\n  return (\n    <>\n      <LoggedInUserContext.Provider value={ user }>\n        <Router>\n          {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */ }\n          <Switch>\n            <Route path={ urls.home } exact={ true }>\n              <HomePage loaded={ loaded }/>\n            </Route>\n            { loaded\n              ?\n              <>\n                <Route path={ urls.signup } component={ Signup }/>\n                <Route path={ urls.login } component={ Login }/>\n                <Route path={ `${ urls.project(':projectKeyParam?') }` } component={ TodoApp }/>\n              </>\n              : <Loader/>\n            }\n          </Switch>\n        </Router>\n      </LoggedInUserContext.Provider>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'sass/index.scss';\nimport 'assets/loader.svg';\nimport 'functions/screenSize'; // must be imported here.\nimport { guessClientOS } from './functions/clientOS';\n\n// import 'materialize-css/dist/js/materialize.min.js';\nimport App from 'App';\n\nconst root = document.getElementById('root');\n\n// if (!localStorage.getItem(osName.storage)) {\n//   localStorage.setItem(osName.storage, JSON.stringify(guessClientOS()));\n// }\nconst os = guessClientOS();\nroot.classList.add(os.isMobile ? 'mobile' : 'desktop');\n\n// ======================================== //\n\nReactDOM.render(<App />, root);\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}